<html>
<head>
   <meta http-equiv="Content-Type" content="text/html; charset=big5">
   <title>===:::::::::: SCM -B [ Pre-Sample working sheet ] ::::::::::===</title>
<link rel=stylesheet type="text/css" href="./bom.css">
{literal}
<script type="text/javascript" src="./js/build/yahoo/yahoo-min.js"></script>
<script type="text/javascript" src="./js/build/connection/connection-min.js"></script>
<script type="text/javascript" src="./js/open_detial.js"></script>
<Script language="javascript">
var transaction;
var sUrl;
var addback = {
	success: function(o) {
		document.getElementById("tbl_msg").style.display='block';    
		var response = o.responseText.split("|");

		msg1.innerText  = response[0]; 
		document.getElementById("rem_show").style.display='block'; 

		r=rem_show.insertRow();
		r.insertCell().innerHTML	= "<b>"+response[1]+"</b>";
		r.insertCell().innerHTML	= "<small>"+response[2]+"</small>";
		r.insertCell().innerHTML	= "<P align=right>"+response[3]+"</P>";
		r.insertCell().innerHTML	= "<P align=right>"+response[4]+"</P>";
		r.insertCell().innerHTML	= "<P align=right>"+response[5]+"</P>";
		r.insertCell().innerHTML	= "<P align=right>"+response[6]+"</P>";
		r.insertCell().innerHTML	= "<P align=right>"+response[7]+"</P>";
		r.insertCell().innerHTML	= "<P align=right>"+response[8]+"</P>";
		r.insertCell().innerHTML	= "<P align=right>"+response[9]+"</P>";
		r.insertCell().innerHTML	= "<P align=right>"+response[10]+"</P>";
		r.insertCell().innerHTML	= "<P align=left>"+response[11]+"</P>";
		
		r.insertCell().innerHTML	= response[12];
		
		window.document.forms['adding'].elements['PHP_renum'].value = response[13];
	},
	failure: function(o) {
		alert("Error¡GCan't get data");
	}
};
var delback = {
	success: function(o) {
		document.getElementById("tbl_msg").style.display='block';    
		var response = o.responseText.split("|");
		var divrep=response[0];
		msg1.innerText  = divrep; 
	document.getElementById("add_"+order_id).style.display='block';
	window.document.forms['adding'].elements['PHP_renum'].value = response[1];

	
	},
	failure: function(o) {
		alert("Error¡GCan't get data");
	}
}; 

var order_id;

function add_cost(id,r,mm,fty,style,dept,ie2)
{
	var acc = eval("window.document.forms['adding'].elements['PHP_acc_'+id].value");
	var oth = eval("window.document.forms['adding'].elements['PHP_oth_'+id].value");
	var exc = eval("window.document.forms['adding'].elements['PHP_exc_'+id].value");
	var qty = eval("window.document.forms['adding'].elements['PHP_qty_'+id].value");
	var smpl = eval("window.document.forms['adding'].elements['PHP_smpl_'+id].value");
	var order = eval("window.document.forms['adding'].elements['PHP_order_'+id].value");
	var cm = eval("window.document.forms['adding'].elements['PHP_cm_'+id].value");
	var renum = eval("window.document.forms['adding'].elements['PHP_renum'].value");
	var rmk = eval("window.document.forms['adding'].elements['PHP_rmk_'+id].value");
	

	if ( ie2 == '0.00' ) {
		if( confirm('Do You Really Want To Use Calculate IE Application by CM.') ){
			document.getElementById("add_"+id).style.display='none'; 
			sUrl = "cost.php?PHP_action=do_remun_add&PHP_renum="+renum+"&PHP_acc="+acc+"&PHP_qty="+qty+"&PHP_smpl="+smpl+"&PHP_order="+order+"&PHP_mm="+mm+"&PHP_fty="+fty+"&PHP_style="+style+"&PHP_ord_id="+id+"&PHP_cm="+cm+"&PHP_rmk="+rmk+"&PHP_dept="+dept+"&PHP_oth="+oth+"&PHP_exc="+exc;
			transaction = YAHOO.util.Connect.asyncRequest('GET', sUrl, addback, null);
		} 
	} else {
		document.getElementById("add_"+id).style.display='none'; 
		sUrl = "cost.php?PHP_action=do_remun_add&PHP_renum="+renum+"&PHP_acc="+acc+"&PHP_qty="+qty+"&PHP_smpl="+smpl+"&PHP_order="+order+"&PHP_mm="+mm+"&PHP_fty="+fty+"&PHP_style="+style+"&PHP_ord_id="+id+"&PHP_cm="+cm+"&PHP_rmk="+rmk+"&PHP_dept="+dept+"&PHP_oth="+oth+"&PHP_exc="+exc;
		transaction = YAHOO.util.Connect.asyncRequest('GET', sUrl, addback, null);
	}

}
function count_s_cost(id)
{
	var cm = eval("window.document.forms['adding'].elements['PHP_cm_'+id].value");
	var acc = eval("window.document.forms['adding'].elements['PHP_acc_'+id].value");
	var oth = eval("window.document.forms['adding'].elements['PHP_oth_'+id].value");
	var exc = eval("window.document.forms['adding'].elements['PHP_exc_'+id].value");
	var h_f = eval("window.document.forms['adding'].elements['PHP_handling_fee_'+id].value");
	if(acc == '')acc = 0;
	if(oth == '')oth = 0;
	if(exc == '')exc = 0;
	var s_cost = parseFloat(cm)+parseFloat(acc)+parseFloat(oth)+parseFloat(exc)+parseFloat(h_f);
	s_cost = roundAmount(s_cost);
	window.document.forms['adding'].elements['PHP_scost_'+id].value = s_cost
}
function cost(id)
{
	var scc = eval("window.document.forms['adding'].elements['PHP_scost_'+id].value");
	var qty = eval("window.document.forms['adding'].elements['PHP_qty_'+id].value");
	var smpl = eval("window.document.forms['adding'].elements['PHP_smpl_'+id].value");
	if(smpl == '')smpl=0;
	if(qty == '')qty=0;
	var cc = parseFloat(scc )*(parseInt(qty)+parseInt(smpl));
	cc = roundAmount(cc);
	window.document.forms['adding'].elements['PHP_cost_'+id].value = cc;

}

function del_cost(rem_id,id,ord_id,r,num)
{
	if ( confirm("This record will forever delete and can't reversion anymore  !\r\rPlease check again\r\rAre you sure delet this ??")) {
		order_id = ord_id
	  var i=r.parentNode.parentNode.rowIndex;
	  document.getElementById('rem_show').deleteRow(i);	  
		// document.getElementById("add_"+ord_id).style.display='block'; 
		sUrl = "cost.php?PHP_action=remun_del&PHP_rem_id="+rem_id+"&PHP_id="+id+"&PHP_ord_num="+num;
    transaction = YAHOO.util.Connect.asyncRequest('GET', sUrl, delback, null);
	}
}

function roundAmount(n) {
	var s = "" + Math.round( n * 100 ) / 100
	var i = s.indexOf('.')
	if ( i < 0 ) return s + ".00"
	var t = s.substring( 0, i + 1 ) +
	s.substring( i + 1 , i + 3 ) 
	if ( i + 2 == s.length ) t += "0"
	return t   
}  
</script>


{/literal}

<!--end custom header content for this example-->

</head>

<body class="yui-skin-sam">
<div id="Layer1" style="display : none"><img src="./images/ajpk.gif" border=0 width=20%></div>

<!--BEGIN SOURCE CODE FOR EXAMPLE =============================== -->
<form method=POST name=adding>
<br>
<table cellspacing=1 cellpadding=4 cols=1 width=780 bgcolor=#333333>
	<tr>
		<td class="des" align=left height=28 >  <b>FTY : <span class=ylw10>{$fty}</span> </b>  </td>				
		<td class="des" align=center height=28> [ <span class=ylw10><b>APPEND</b></span> <b>Cutting & Making charge ] </b></td></tr>
</table>
<table border=1 cellpadding=4 cellspacing=0 cols=1 width=780 id='tbl_msg' {if $msg_YES} style="display : block" {else}style="display : none"{/if}>
	<tr bgcolor=#ffffff> 
		<td width=90 class=gry10 align=center><img src="images/alert.gif" border=0></td>
		<td class=bgdy><div id='msg1'>{section name=SEC_MSG loop=$msg} {$msg[SEC_MSG]}<br>{/section}</div></td>
	</tr>
</table>

<table width=780 border=0 cellspacing=2 cellpadding=2>
	<tr>	  
		<td class=b9 align=right colspan=2><b>Currency : US$</b></td>
	</tr>
</table>

<form method=POST name=adding >
<input type="hidden" name="PHP_renum" value="">
<table width="870" border="1" cellspacing="0" cellpadding="2">
    <tr bgcolor="#eeeeee">
        <td width=60 align=center><b>ORDER#</b></td>
		
        <td width=30 align=center title="Calculate IE"><b>Cal. IE</b></td>
		
        <td width=30 align=center title="Final IE"><b>Fnl. IE</b></td>
        <td width=60 align=center><b>Style#</b></td>
        <td align=center width=50><b>Style </b></td>
        <td width=40 align=center><b>C.M.</b></td>
        <td width=50 align=center><b>Other<br>Cost</b></td>
        <td width=50 align=center><b>acc<br>Cost</b></td>
        <td width=60 align=center><b>Excpetion<br>Cost</b></td>
        <td width=60 align=center><b>Handling<br>Fee</b></td>
		<td width=50 align=center><b>@Cost</b></td>
        <td width=60 align=center><b>Sample<br>Q'ty</b></td>
        <td width=60 align=center><b>SHPed.<br>Q'ty</b></td>
        <td width=80 align=center><b>Cost</b></td>
        <td width=100 align=center><b>Remark</b></td>
        <td width=30 align=center><b>ADD</b></td>
    </tr>
    {section name=USE loop=$remun} 		   
    <tr id = add_{$remun[USE].id}>
        <td align=center nowrap>
            <a href="javascript:show_order_rec('{$remun[USE].id}','{$remun[USE].order_num}')" value='ord_out' style='cursor:pointer'>
            <b>{$remun[USE].order_num}</b></a>	  	
        </td>
		{if $is_factory == 1}
			{if $remun[USE].dept == $account_factory}
			<td align=center><small>{$remun[USE].ie1}&nbsp;</small></td>
			{else}
			<td align=center><small>&nbsp;</small></td>
			{/if}
		{else}
			<td align=center><small>{$remun[USE].ie1}&nbsp;</small></td>
		{/if}
        <td align=center><small>{$remun[USE].ie2}&nbsp;</small></td>
        <input type="hidden" name="PHP_order_{$remun[USE].id}" value="{$remun[USE].order_num}">
        <td align=center><small>{$remun[USE].style_num}&nbsp;</small></td>
        <td align=center><small>{$remun[USE].style_des}&nbsp;</small></td>
        <td align=right nowrap>$ {$remun[USE].fty_cm|number_format:"2f"}</td>
        <input type="hidden" name="PHP_cm_{$remun[USE].id}" value="{$remun[USE].fty_cm|number_format:"2f"}">
        <td align=center nowrap>$ <input name="PHP_oth_{$remun[USE].id}" type="text" value="" size=2 class=select onChange="count_s_cost('{$remun[USE].id}')" style=text-align:center ></td>
        <td align=center nowrap>$ <input name="PHP_acc_{$remun[USE].id}" type="text" value="" size=2 class=select onChange="count_s_cost('{$remun[USE].id}')" style=text-align:center ></td>		  	
        <td align=center nowrap>$ <input name="PHP_exc_{$remun[USE].id}" type="text" value="" size=2 class=select onChange="count_s_cost('{$remun[USE].id}')" style=text-align:center ></td>
         <td align=right nowrap>$ {$remun[USE].handling_fee|number_format:"2f"}<input type="hidden" name="PHP_handling_fee_{$remun[USE].id}" value="{$remun[USE].handling_fee|number_format:"2f"}"></td>
		<td align=right nowrap>$ <input name="PHP_scost_{$remun[USE].id}" type="text" value="{$remun[USE].acost|number_format:"2f"}" size=3 style=text-align:center readonly ></td>
        <td align=center><input name="PHP_smpl_{$remun[USE].id}" type="text" value="" size=2 style=text-align:center class=select onchange="cost('{$remun[USE].id}')"></td>
        <td width=100 align=center><input name="PHP_qq_{$remun[USE].id}" type="hidden" value="{$remun[USE].rmn_qty}" size=2 style=text-align:center readonly ><input name="PHP_qty_{$remun[USE].id}" type="text" value="{$remun[USE].rmn_qty}" size=2 style=text-align:center class=select onclick="cost('{$remun[USE].id}')" readonly></td>
        <td align=right nowrap>$ <input name="PHP_cost_{$remun[USE].id}" type="text" value="" size=6 style=text-align:center readonly ></td>
        <td align=right><input name="PHP_rmk_{$remun[USE].id}" type="text" value="" size=13 class=select></td>
        <td align=left>
        {if $remun[USE].fty_cm > 0 and ( $remun[USE].ie2 > 0 or $fty != 'LY' )}
        <a href="javascript:add_cost('{$remun[USE].id}','this','{$mm}','{$fty}','{$remun[USE].style_num}','{$dept}','{$remun[USE].ie2}')" value='add' style='cursor:pointer'>
        <img src='images/add.gif' border=0 ALT="add"></a>
        {/if}
        </td>
    </tr>
    {/section}	  	
</table>
<br>
<table width=800 border=1 cellspacing=0 cellpadding=2 id='rem_show' style="display : 'none'">
    <tr bgcolor="#eeeeee">
        <td width=60 align=center><b>ORDER#</b></td>
        <td align=center><b>Style #</b></td>
        <td width=40 align=center><b>C.M.</b></td>
        <td width=80 align=center><b>other Cost</b></td>
        <td width=80 align=center><b>acc Cost</b></td>		 
        <td width=80 align=center><b>exception<BR> Cost</b></td>
        <td width=50 align=center><b>@Cost</b></td>
        <td width=80 align=center><b>Smpl. Q'ty</b></td>
        <td width=50 align=center><b>Q'ty</b></td>
        <td align=center><b>Cost</b></td>
        <td align=center><b>Remark</b></td>
        <td width=30 align=center><b>DEL</b></td>		  
    </tr>
</table>


<table border=0 cellspacing=0 cellpadding=2 width=700 bgcolor=#ffffff align=center>
  <tr>
	<td width=150 valign=top>	
			<input type=button onClick="window.location.href='cost.php?PHP_action=Remun'" value=" << go back " class=select_e style="cursor:pointer; width=99%">

	</td>
  <td>
	<input type="hidden" name="PHP_action" value="remun_view">
<!--	<input type="hidden" name="PHP_back_str" value="{$back_str}">  -->
	<input type=submit value="[ CFM to Add above Remuneration ]" class=select_e style="cursor:pointer; width=100%" onClick=this.width=0;></form>
  </tr>
</table>
</form>
<!--END SOURCE CODE FOR EXAMPLE =============================== -->

</body>
</html>
