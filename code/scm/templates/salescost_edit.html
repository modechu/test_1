<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=big5" />
<title>SCM SYSTEM [ ]</title>
<link rel=stylesheet type="text/css" href="./bom.css">
{literal}
<script type="text/javascript"
        src="./js/build/yahoo/yahoo-min.js"></script>
<script type="text/javascript"
        src="./js/build/connection/connection-min.js"></script>

<script type="text/javascript" src="./js/open_detial.js"></script>



<Script language="javascript">
	var transaction;
  var sUrl;
  var i;
  var addback = {
    success: function(o) {
		document.getElementById("tbl_msg").style.display='block';    
    	var response = o.responseText.split("|");

		msg1.innerText  = response[0]; 
    },
    failure: function(o) {
      alert("Error¡GCan't get data");
    }
  };
  var delback = {
    success: function(o) {
    	document.getElementById("tbl_msg").style.display='block';    
    	var response = o.responseText.split("|");
    	var divrep=response[0];
    	msg1.innerText  = divrep; 
	  document.getElementById("add_tr_"+order_id).style.display='block';
		window.document.forms['add'].elements['PHP_cost'].value = response[1];

	  
    },
    failure: function(o) {
      alert("Error¡GCan't get data");
    }
  }; 
</script>

<Script language="javascript">
var order_id;
function edit_cost(id,ord_num)
{
	var fab_cost;
	var yy;
	var fty_cost;
	var smpl;
	var comm;
	var acc_cost;
	
	var etd      = eval("window.document.forms['add'].elements['PHP_etd_'+id].value");
	var qty      = eval("window.document.forms['add'].elements['PHP_qty_'+id].value");
	var quota    = eval("window.document.forms['add'].elements['PHP_quota_'+id].value");
	var fob      = eval("window.document.forms['add'].elements['PHP_fob_'+id].value");
//	var fab_cost = eval("window.document.forms['add'].elements['PHP_fab_cost_'+id].value");
//	var yy  		 = eval("window.document.forms['add'].elements['PHP_yy_'+id].value");
//	var acc_cost = eval("window.document.forms['add'].elements['PHP_acc_cost_'+id].value");
//	var fty_cost = eval("window.document.forms['add'].elements['PHP_fty_cost_'+id].value");
//	var smpl     = eval("window.document.forms['add'].elements['PHP_sample_'+id].value");
//	var comm     = eval("window.document.forms['add'].elements['PHP_comm_'+id].value");	
	var cm       = eval("window.document.forms['add'].elements['PHP_cm_'+id].value");
	var cost     = eval("window.document.forms['add'].elements['PHP_cost'].value");

  sUrl = "cost.php?PHP_action=do_cost_edit&PHP_ord_num="+ord_num+"&PHP_etd="+etd+"&PHP_cm="+cm+"&PHP_id="+id+	
         "&PHP_qty="+qty+"&PHP_quota="+quota+"&PHP_fob="+fob+"&PHP_fab_cost="+fab_cost+"&PHP_yy="+yy+
         "&PHP_acc_cost="+acc_cost+"&PHP_fty_cost="+fty_cost+"&PHP_smpl="+smpl+"&PHP_comm="+comm;
         
  transaction = YAHOO.util.Connect.asyncRequest('GET', sUrl, addback, null);

}

function del_cost(cost_id,id,rem_id,r)
{


	if ( confirm("This record will forever delete and can't reversion anymore  !\r\rPlease check again\r\rAre you sure delet this ??")) {
	  var i=r.parentNode.parentNode.rowIndex;
	  
	  document.getElementById('cost_show').deleteRow(i);		
 	  sUrl = "cost.php?PHP_action=cost_del&PHP_cost_id="+cost_id+"&PHP_id="+id+"&PHP_rem_id="+rem_id;
    transaction = YAHOO.util.Connect.asyncRequest('GET', sUrl, delback, null);
	} 

}
</script>
{/literal}
</head>

<body>
<table border=1 cellpadding=4 cellspacing=0 cols=1 width=800 id='tbl_msg' {if $msg_YES} style="display : block" {else}style="display : none"{/if}>
	<tr bgcolor=#ffffff> 
		<td width=90 class=gry10 align=center><img src="images/alert.gif" border=0></td>
		<td class=bgdy><div id='msg1'>{section name=SEC_MSG loop=$msg} {$msg[SEC_MSG]}<br>{/section}</div></td>
	</tr>
</table>
<table width="95%" border="1" cellpadding="5" cellspacing="0" bgcolor="#CCCCCC">
  <form action="{$PHP_SELF}" method="post" name="add" id="add">
  	<input type="hidden" name="PHP_cost" value="">
    <tr>
      <td><table width="100%" border="0" cellpadding="5" cellspacing="0" bgcolor="#FFFFFF">
        <tr>
        	<td align="Left" class="txt_B_b"><b>FTY : {$cost.fty} </b></td>
          <td align="center" class="txt_B_b"><b>Sales Cost [{$cost.out_month}]</b></td>
          <td align="Right" class="txt_B_b"><b>Cust : {$cost.cust}</b></td>
        </tr>
      </table>
          <hr size="2" width="100%" />
			<table width="100%" border="0" cellpadding="5" cellspacing="0" bgcolor="#FFFFFF">
        <tr>
        	<td align="right" class="txt_B_b">Invoice # :</td>
          <td align="left"><input name="PHP_inv" type="text" size="40"  value={$cost.inv}> </td>
         
        </tr>
      </table>
      <hr size="2" width="100%" />
          <table width="100%" border="1" cellspacing="0" cellpadding="0" >
            <tr>
            <td valign="top"><table width="100%" border="0" cellpadding="1" cellspacing="2" id='cost_show'>
            
                  <tr>
                    <td height="20" colspan="5" align="center" bgcolor="#FFFFFF" class="B_blue10">Product item</td>
                    <td align="center" bgcolor="#FFFFFF" class="B_blue10">Sales</td>
                    <td colspan="3" align="center" bgcolor="#FFFFFF" class="B_blue10">Costs</td>
                  </tr>
                  <tr>
                    <td height="16" align="center" bgcolor="#EEEEEE" class="item1">Order #</td>
                    <td align="center" bgcolor="#EEEEEE" class="item1">Style</td>
                    <td align="center" bgcolor="#EEEEEE" class="item1">ETD</td>
                    <td align="center" bgcolor="#EEEEEE" class="item1">Q'ty</td>
                    <td align="center" bgcolor="#EEEEEE" class="item1">Quota</td>
                    <td align="center" nowrap="nowrap" bgcolor="#EEEEEE" class="item1">FOB</td>
<!--  
                    <td height="16" align="center" nowrap="nowrap" bgcolor="#EEEEEE" class="item1">Fab. <br> u-cost</td>
                    <td align="center" nowrap="nowrap" bgcolor="#EEEEEE" class="item1">YY</td>
                    <td align="center" nowrap="nowrap" bgcolor="#EEEEEE" class="item1">Acc. <br> Cost</td>
                    <td align="center" nowrap="nowrap" bgcolor="#EEEEEE" class="item1">Fty-acc. <br> Cost</td>
-->
                    <td align="center" nowrap="nowrap" bgcolor="#EEEEEE" class="item1">C.M</td>
<!--
                    <td align="center" nowrap="nowrap" bgcolor="#EEEEEE" class="item1">Comm.</td>
                    <td align="center" nowrap="nowrap" bgcolor="#EEEEEE" class="item1">Sample <br> Cost</td>
-->                    
                    <td align="center" nowrap="nowrap" bgcolor="#EEEEEE" class="item1" colspan=2>&nbsp;</td>
                  </tr>
                {section name=USE loop=$scost}
                  <tr id=add_tr_{$scost[USE].id}>
                    <td align="center" bgcolor="#FFFFFF"><input name="PHP_ord_{$scost[USE].id}" type="text" size="5"  value={$scost[USE].order_num}/></td>
                    <td align="center" bgcolor="#FFFFFF"><input name="PHP_style_{$scost[USE].id}" type="text" size="5" value={$scost[USE].style_des}></td>
                    <td align="center" bgcolor="#FFFFFF"><input name="PHP_etd_{$scost[USE].id}" type="text" size="6" value={$scost[USE].etd} /></td>
                    <td align="center" bgcolor="#FFFFFF"><input name="PHP_qty_{$scost[USE].id}" type="text" size="2" value={$scost[USE].qty} />pc</td>
                    <td align="center" bgcolor="#FFFFFF"><input name="PHP_quota_{$scost[USE].id}" type="text" size="2" value="{$scost[USE].quota}" /></td>
                    <td align="center" bgcolor="#FFFFFF"><input name="PHP_fob_{$scost[USE].id}" type="text" size="2" value={$scost[USE].fob} ></td>
<!-- 
                    <td align="center" bgcolor="#FFFFFF"><input name="PHP_fab_cost_{$scost[USE].id}" type="text" size="2" value={$scost[USE].fab_cost} /></td>
                    <td align="center" bgcolor="#FFFFFF"><input name="PHP_yy_{$scost[USE].id}" type="text" size="2" value={$scost[USE].yy} /></td>
                    <td align="center" bgcolor="#FFFFFF"><input name="PHP_acc_cost_{$scost[USE].id}" type="text" size="2" value={$scost[USE].acc_cost} /></td>
                    <td align="center" bgcolor="#FFFFFF"><input name="PHP_fty_cost_{$scost[USE].id}" type="text" size="2" value={$scost[USE].acc_f_cost} /></td>
 -->
                    <td align="center" bgcolor="#FFFFFF"><input name="PHP_cm_{$scost[USE].id}" type="text" size="2" value={$scost[USE].cm} /></td>
<!--                    
                    <td align="center" bgcolor="#FFFFFF"><input name="PHP_comm_{$scost[USE].id}" type="text" size="2" value={$scost[USE].comm} /></td>
                    <td align="center" bgcolor="#FFFFFF"><input name="PHP_sample_{$scost[USE].id}" type="text" size="2" value='{$scost[USE].smpl_cost}' /></td>
--> 
                 	  <td align=left bgcolor="#FFFFFF">
		  								<input type='button' value='update'  onclick="edit_cost('{$scost[USE].id}','{$scost[USE].order_num}')">
		  						 </td>
                 	 <td align=left bgcolor="#FFFFFF">
		  								<input type='image' src='images/del.png'  onclick="del_cost('{$cost.id}','{$scost[USE].id}','{$scost[USE].remdt_id}',this)">
		  						 </td>
                  </tr>
                 {/section}
              </table></td>
            </tr>
          </table>
    </tr>

</table>
<br>


  </tr>
</table>
<br>
<table width=800 border=0 cellspacing=0 cellpadding=2 class=b9>
	{if $rev == 1}
		<input type="hidden" name="PHP_action" value="cost_rev_view">
	{else}
		<input type="hidden" name="PHP_action" value="cost_add_view">
	{/if}
	<input type="hidden" name="PHP_cost" value="{$cost.id}">
	<input type="hidden" name="PHP_back_str" value="{$back_str}">
	<tr>
		  	{if $back_str}
	<td width=200>	
			<input type=button onClick="window.location.href='cost.php?PHP_action=cost_search{$back_str}'" value=" << go back " class=select_e style="cursor:pointer; width=99%">

	</td>
			{/if}
		<td><input name="Submit" type="submit" class="select_e" value="CFM to Update above records" style=" cursor:pointer; width:100%; height:20;" /></td>
   </tr>
</table>
  </form>

<!--------- footer ---------->
{include file="footer.html"}

