<html>
<head>
   <meta http-equiv="Content-Type" content="text/html; charset=big5">
   <title>===:::::::::: SCM -B [ Pre-Sample working sheet ] ::::::::::===</title>
<link rel=stylesheet type="text/css" href="./bom.css">
{literal}
<script type="text/javascript" src="./js/build/yahoo/yahoo-min.js"></script>
<script type="text/javascript" src="./js/build/connection/connection-min.js"></script>
<script type="text/javascript" src="./js/open_detial.js"></script>
<Script language="javascript">

var transaction;
var sUrl;
var addback = {
	success: function(o) {
	document.getElementById("tbl_msg").style.display='block';    
		var response = o.responseText.split("|");
		msg1.innerText  = response[0]; 
	},
	failure: function(o) {
		alert("Error¡GCan't get data");
	}
};
var delback = {
	success: function(o) {
		document.getElementById("tbl_msg").style.display='block';    
		var response = o.responseText.split("|");
		var divrep=response[0];
		msg1.innerText  = divrep; 	  
	},
	failure: function(o) {
		alert("Error¡GCan't get data");
	}
}; 

function update_cost(id,ord_num,ie2)
{
	var acc = eval("window.document.forms['adding'].elements['PHP_acc_'+id].value");
	var oth = eval("window.document.forms['adding'].elements['PHP_oth_'+id].value");
	var exc = eval("window.document.forms['adding'].elements['PHP_exc_'+id].value");
	var qty = eval("window.document.forms['adding'].elements['PHP_qty_'+id].value");
	var smpl = eval("window.document.forms['adding'].elements['PHP_smpl_'+id].value");
	var rmk = eval("window.document.forms['adding'].elements['PHP_rmk_'+id].value");
	
	if ( ie2 == '0.00' ) {
		if( confirm('Do You Really Want To Use Calculate IE Application by CM.') ){
			sUrl = "cost.php?PHP_action=do_remun_edit&PHP_acc="+acc+"&PHP_qty="+qty+"&PHP_smpl="+smpl+"&PHP_order="+ord_num+"&PHP_id="+id+"&PHP_rmk="+rmk+"&PHP_oth="+oth+"&PHP_exc="+exc;
			transaction = YAHOO.util.Connect.asyncRequest('GET', sUrl, addback, null);
		} 
	} else {
		sUrl = "cost.php?PHP_action=do_remun_edit&PHP_acc="+acc+"&PHP_qty="+qty+"&PHP_smpl="+smpl+"&PHP_order="+ord_num+"&PHP_id="+id+"&PHP_rmk="+rmk+"&PHP_oth="+oth+"&PHP_exc="+exc;
		transaction = YAHOO.util.Connect.asyncRequest('GET', sUrl, addback, null);
	}
}

function count_s_cost(id)
{
	var cm = eval("window.document.forms['adding'].elements['PHP_cm_'+id].value");
	var acc = eval("window.document.forms['adding'].elements['PHP_acc_'+id].value");
	var exc = eval("window.document.forms['adding'].elements['PHP_exc_'+id].value");
	var oth = eval("window.document.forms['adding'].elements['PHP_oth_'+id].value");
	var h_f = eval("window.document.forms['adding'].elements['PHP_handling_fee_'+id].value");
	if(acc == '')acc = 0;
	if(exc == '')exc = 0;
	if(oth == '')oth = 0;
	var s_cost = parseFloat(cm)+parseFloat(acc)+parseFloat(exc)+parseFloat(oth)+parseFloat(h_f);
	window.document.forms['adding'].elements['PHP_scost_'+id].value = s_cost

	var qty = eval("window.document.forms['adding'].elements['PHP_qty_'+id].value");
	var cc = parseFloat(s_cost)*parseInt(qty);
	window.document.forms['adding'].elements['PHP_cost_'+id].value = cc;
}

function cost(id)
{
	var scc = eval("window.document.forms['adding'].elements['PHP_scost_'+id].value");
	var qty = eval("window.document.forms['adding'].elements['PHP_qty_'+id].value");
	var smpl = eval("window.document.forms['adding'].elements['PHP_smpl_'+id].value");
	if(smpl == '')smpl=0;
	if(qty == '')qty=0;
	var cc = parseFloat(scc)*(parseInt(qty)+parseInt(smpl));

	cc = roundAmount(cc);
	window.document.forms['adding'].elements['PHP_cost_'+id].value = cc;
}

function del_cost(rem_id,id,r,mum)
{
	if ( confirm("This record will forever delete and can't reversion anymore  !\r\rPlease check again\r\rAre you sure delet this ??")) {
	  var i=r.parentNode.parentNode.rowIndex;
	  document.getElementById('rem_show').deleteRow(i);	  
		
 	  sUrl = "cost.php?PHP_action=remun_del&PHP_rem_id="+rem_id+"&PHP_id="+id+'&PHP_ord_num='+mum;
    transaction = YAHOO.util.Connect.asyncRequest('GET', sUrl, delback, null);
	} 
}

function roundAmount(n)   {   
	var s = ""   +   Math.round(n   *   100)   /   100   
	var i = s.indexOf('.')   
	if (i < 0)   return   s   +   ".00"   
	var t = s.substring(0,   i   +   1)   +     
					s.substring(i   +   1,   i   +   3)   
	if (i + 2 == s.length)   t   +=   "0"   
		return t   
}

</script>
{/literal}
<!--end custom header content for this example-->
</head>
<body class="yui-skin-sam">
<div id="Layer1" style="display : none"><img src="./images/ajpk.gif" border=0 width=20%></div>

<!--BEGIN SOURCE CODE FOR EXAMPLE =============================== -->
<form method=POST name=adding>
<br>
<table cellspacing=1 cellpadding=4 cols=1 width=780 bgcolor=#333333>
	<tr>
		<td class="des" align=left height=28 >  <b>FTY : <span class=ylw10>{$remun.fty}</span> </b>  </td>		
		<td class="des" align=center height=28> [ <span class=ylw10><b>Edit</b></span> <b> Cutting & Making charge for {$remun.num} ] </b></td></tr>
</table>
<table border=1 cellpadding=4 cellspacing=0 cols=1 width=780 id='tbl_msg' {if $msg_YES} style="display : block" {else}style="display : none"{/if}>
	<tr bgcolor=#ffffff> 
		<td width=90 class=gry10 align=center><img src="images/alert.gif" border=0></td>
		<td class=bgdy><div id='msg1'>{section name=SEC_MSG loop=$msg} {$msg[SEC_MSG]}<br>{/section}</div></td>
	</tr>
</table>
	<table width=780 border=0 cellspacing=2 cellpadding=2>
		 <tr>	  
		  <td class=b9 align=right colspan=2><b>Currency : US$</b></td>
		 </tr>
	</table>	 
<form method=POST name=adding >
		<input type="hidden" name="PHP_renum" value="{$remun.id}">
	  <table width=780 border=1 cellspacing=0 cellpadding=2 id='rem_show'>
		 <tr bgcolor="#eeeeee">
		  <td width=60 align=center><b>ORDER#</b></td>
		  <td width=30 align=center title="Calculate IE"><b>Cal. IE</b></td>
		  <td width=30 align=center title="Final IE"><b>Fnl. IE</b></td>
		  <td width=50 align=center><b>Style #</b></td>
		  <td width=40 align=center><b>C.M.</b></td>
		  <td width=40 align=center><b>Other<br>Cost</b></td>
		  <td width=40 align=center><b>acc<br>Cost</b></td>
		  <td width=60 align=center><b>Excpetion<br>Cost</b></td>
		  <td width=60 align=center><b>Handling<br>Fee</b></td>
		  <td width=50 align=center><b>@Cost</b></td>
		  <td width=60 align=center><b>Sample<br>Q'ty</b></td>
		  <td width=50 align=center><b>SHPed.<br>Q'ty</b></td>
		  <td width=80 align=center><b>Cost</b></td>
		  <td align=center colspan=3><b>Remark</b></td>

		 </tr>
		  {section name=USE loop=$rem_det} 		   
		  <tr id = add_{$rem_det[USE].id}>
	  	<td align=center nowrap>
	     	<a href="javascript:show_order_rec('{$rem_det[USE].ord_id}','{$rem_det[USE].ord_num}')" value='ord_out' style='cursor:pointer'>
	   		<b>{$rem_det[USE].ord_num}</b></a>
	  	</td>
		  <td align=center><small>{$rem_det[USE].ie1}&nbsp;</small></td>
		  <td align=center><small>{$rem_det[USE].ie2}&nbsp;</small></td>
		  <td align=center><small>{$rem_det[USE].style_num}&nbsp;</small></td>
		  <td align=right>{$rem_det[USE].cm_cost|number_format:"2f"}</td>
		  <input type="hidden" name="PHP_cm_{$rem_det[USE].id}" value="{$rem_det[USE].cm_cost|number_format:"2f"}">
		  <td align=center><input name="PHP_oth_{$rem_det[USE].id}" type="text" value="{$rem_det[USE].oth_cost}" size=1 class=select onChange="count_s_cost('{$rem_det[USE].id}')" style=text-align:center ></td>
		  <td align=center><input name="PHP_acc_{$rem_det[USE].id}" type="text" value="{$rem_det[USE].acc_cost}" size=1 class=select onChange="count_s_cost('{$rem_det[USE].id}')" style=text-align:center ></td>
		  <td align=center><input name="PHP_exc_{$rem_det[USE].id}" type="text" value="{$rem_det[USE].exc_cost}" size=1 class=select onChange="count_s_cost('{$rem_det[USE].id}')" style=text-align:center ></td>
		  <td align=right>{$rem_det[USE].handling_fee|number_format:"2f"}<input name="PHP_handling_fee_{$rem_det[USE].id}" type="hidden" value="{$rem_det[USE].handling_fee}"></td>
		  <td align=center><input name="PHP_scost_{$rem_det[USE].id}" type="text" value="{$rem_det[USE].a_cost}" size=1 style=text-align:center readonly ></td>
		  <td align=center><input name="PHP_smpl_{$rem_det[USE].id}" type="text" value="{$rem_det[USE].smpl}" size=1 style=text-align:center class=select  onchange="cost('{$rem_det[USE].id}')"></td>
		  <td align=center><input name="PHP_qq_{$rem_det[USE].id}" type="hidden" value="{$rem_det[USE].rmn_qty}" size=3 style=text-align:center readonly ><input name="PHP_qty_{$rem_det[USE].id}" type="text" value="{$rem_det[USE].rem_qty}" size=3 style=text-align:center class=select onclick="cost('{$rem_det[USE].id}')" readonly></td>
		  <td align=center nowrap>$ <input name="PHP_cost_{$rem_det[USE].id}" type="text" value="{$rem_det[USE].cost}" size=6 style=text-align:center readonly ></td>
		  <td align=center><input name="PHP_rmk_{$rem_det[USE].id}" type="text" value="{$rem_det[USE].rmk}" size=15 class=select></td>
		  <td align=left width=50>
				<input type=button value="Update" class=select_e style="cursor:pointer; width=100%" onClick=update_cost('{$rem_det[USE].id}','{$rem_det[USE].ord_num}','{$rem_det[USE].ie2}');>
		  </td>
		  <td align=left width=20>
				<input type='image' src='images/del.png'  onclick="del_cost('{$remun.id}','{$rem_det[USE].id}',this,'{$rem_det[USE].ord_num}')">
		  </td>
		  </tr>
		  {/section}	  	
 </table>

<br>

<table border=0 cellspacing=0 cellpadding=2 width=700 bgcolor=#ffffff align=center>
  <tr>
    	{if $back_str}
	<td width=200 valign=top>	
			<input type=button onClick="window.location.href='cost.php?PHP_action=remun_search{$back_str}'" value=" << go back " class=select_e style="cursor:pointer; width=99%">

	</td>
			{/if}
  <td colspan=6>
	<input type="hidden" name="PHP_action" value="remun_view">
		<input type="hidden" name="PHP_remun" value="{$remun.id}">
 	  <input type="hidden" name="PHP_back_str" value="{$back_str}">  
	<input type=submit value="[ CFM to Update above Remuneration ]" class=select_e style="cursor:pointer; width=100%" onClick=this.width=0;></form>
  </tr>
</table>
</form>
<!--END SOURCE CODE FOR EXAMPLE =============================== -->

</body>
</html>
