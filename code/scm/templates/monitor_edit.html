<html>
<head>
   <meta http-equiv="Content-Type" content="text/html; charset=big5">
   <title>===:::::::::: Tai Yuen ::::::::::===</title>
<link rel=stylesheet type="text/css" href="./bom.css">
{literal}
<script type="text/javascript"
        src="./js/build/yahoo/yahoo-min.js"></script>
<script type="text/javascript"
        src="./js/build/connection/connection-min.js"></script>
<script language="javascript" src="./js/col.js"></script>
<script>
var transaction;
  var sUrl;	
  var delback = {
    success: function(o) {
    	
    	document.getElementById("tbl_msg").style.display='block';  
    	document.getElementById("open_edit").style.display='block';    
    	document.getElementById("open_view").style.display='none';    	 
    	var response = o.responseText;    	
    	msg1.innerText  = response; 
    },
    failure: function(o) {
      alert("Error¡GCan't get data");
    }
  };  
  
  var editback = {
    success: function(o) {
    	document.getElementById("tbl_msg").style.display='block';  
    	document.getElementById("open_edit").style.display='block';    
    	document.getElementById("ajx_wait").style.display='none';  
    	var response = o.responseText;    	
    	msg1.innerText  = response; 
    },
    failure: function(o) {
      alert("Error¡GCan't get data");
    }
  };  
function del_ajx(id,r){
	if ( confirm("This record will forever delete and can't reversion anymore  !\r\rPlease check again\r\rAre you sure delet ??")) {
	  var i=r.parentNode.parentNode.rowIndex;
	  document.getElementById('mon_table').deleteRow(i);	  
//		alert(id);
 	  sUrl = "monitor.php?PHP_action=monitor_del_ajx&PHP_id="+id;
    transaction = YAHOO.util.Connect.asyncRequest('GET', sUrl, delback, null);
	  

	} 

}
function open_edit(id)
{
	  open_date = window.document.forms['mon_add'].elements['PHP_open'].value;
    document.getElementById("ajx_wait").style.display='block';
    document.getElementById("open_edit").style.display='none';
    sUrl = "monitor.php?PHP_action=do_date_edit_ajx&PHP_open_date="+open_date+"&PHP_id="+id;	
    transaction = YAHOO.util.Connect.asyncRequest('GET', sUrl, editback, null);
}
function add_holday(id,open_date,back_str)
{
/*
		var out_date = window.document.forms['mon_add'].elements['PHP_out_date'].value;
	  if (open_date > out_date)
	  {
	  	alert('Error !! Out-put date < Open date')
	  	return;
	  }
		window.location='monitor.php?PHP_action=add_holday&PHP_mon_id='+id+'&PHP_out_date='+out_date+back_str;
*/
		 window.document.forms['mon_add'].elements['PHP_holday'].value = 1;
}
	</script>
	{/literal}
</head>
<body ><form METHOD="POST" name="mon_add" action="{$PHP_SELF}">
<br>
<table cellspacing=1 cellpadding=4 cols=1 width=550 bgcolor=#003300>
	<tr><td class="des" align=center height=28> [ <b><font color=yellow>{$mon.ord_num}</font>&nbsp;;MONITOR OUT-PUT </b> -- EDIT ] </td></tr>
</table>
     <table border=1 cellpadding=4 cellspacing=0 cols=1 width=550 id='tbl_msg' {if $msg_YES} style="display : block" {else}style="display : none"{/if}>
      <tr bgcolor=#ffffff> 
        <td width=90 class=gry10 align=center><img src="images/alert.gif" border=0></td>
        <td class=bgdy><div id='msg1'>{section name=SEC_MSG loop=$msg} {$msg[SEC_MSG]}<br>{/section}</div></td>
        
      </tr>
     </table>
<table border=0 cellspacing=1 cellpadding=1 width=550 bgcolor=#FFFFFF>
  <tr>
    <td colspan=6 class=frnt align=center><hr size=2 width=98%></td>
  <tr>
  <tr>
    <td width=80	class=snvy align=right><b>Factory # :</b></td>
    <td width=80 class=frnt align=left bgcolor=#CEE4E3>&nbsp;<b>{$mon.fty}</td>
    <td width=90	class=snvy align=right><b>Pdt. Line :</b></td>
    <td width=90	class=frnt align=left bgcolor=#CEE4E3>&nbsp;<b>{$mon.line}&nbsp;&nbsp;(<b>{$mon.worker} P</b>)</td>
    <td width=80	class=snvy align=right><b>Open Date :</b></td>
    <td width=130	class=frnt align=left bgcolor=#CEE4E3>
    	<div id=open_view  {if $mon_det.0.out_date} style="display : block" {else} style="display : none"{/if}>    		
    		&nbsp;{$mon.open_date}
    	</div>
    	<div id=open_edit  {if $mon_det.0.out_date == ''} style="display : block" {else} style="display : none"{/if}>    		
    		<input type='text' name="PHP_open" size=8 class=select value="{$mon.open_date}" >
				<img align='top' onmousedown="javascript:Cal(document.mon_add.PHP_open,1,100,50,999,0,'')" src='images/cal.gif' width="16" height="16"  align='top' style='cursor:hand' >
			  <img src="images/ok01.gif" alt="Edit" border=0 align='top' onclick="javascript:open_edit('{$mon.id}')"; style='cursor:hand' height="20">
			</div>
	    <div align=center id=ajx_wait style="display:none;"><img src="./images/ajax-loader.gif" alt="Wait" style="cursor:pointer" height=20></div>
   </td>
  </tr>
  <tr>
    <td class=snvy align=right><b>Order # :</b></td>
    <td class=frnt align=left bgcolor=#CEE4E3>&nbsp;{$mon.ord_num}</td>
    <td class=snvy align=right><b>Style # :</b></td>
    <td class=frnt align=left bgcolor=#CEE4E3>&nbsp;{$mon.style}</td>
    <td class=snvy align=right><b>IE :</b></td>
    <td class=frnt align=left bgcolor=#CEE4E3>&nbsp;{$mon.ie}</td>
  </tr>
  <tr>
    <td colspan=6 class=frnt align=center><hr size=2 width=98%></td>
  </tr>
</table>
<table border=0 cellspacing=1 cellpadding=1 width=550 bgcolor=#FFFFFF>
	 			<input type='hidden' name="PHP_action" value="do_mon_add_det" >
			<input type='hidden' name="PHP_mon_id" value="{$mon.id}" >
			<input type='hidden' name="PHP_holday" value="0" >
			<input type='hidden' name="PHP_open_date" value="{$mon.open_date}" >
			<input type='hidden' name="PHP_back_str" value="{$back_str}" >

  <tr>
    <td width=80class=snvy align=right><b>Output :</b></td>
    <td width=320 class=frnt align=left bgcolor=#CEE4E3>&nbsp;
    		DATE : <input type='text' name="PHP_out_date" size=15 class=select value="">
				&nbsp;&nbsp;<img align='top' onmousedown="javascript:Cal(document.mon_add.PHP_out_date,1,100,50,999,0,'')" src='images/cal.gif' width="16" height="16"  align='top' style='cursor:hand' >
    		&nbsp;&nbsp;&nbsp;&nbsp;Q'TY : <input type='text' name="PHP_out_qty" size=10 class=select value="">
    </td>
    <td width=100 class=snvy align=center bgcolor=#CEE4E3>
    	<input type=submit value=" ADD " class=select_e style="cursor:pointer; width=95%">

  </td>

   <td width=50 class=snvy align=center bgcolor=#CEE4E3>
    	<input type=submit value=" Holday " style="cursor:pointer; width=95%" onclick=add_holday('{$mon.id}','{$mon.open_date}','{$back_str}')>
   </td>
  </tr>
 			<input type='hidden' name="PHP_action" value="do_mon_add_det" >
			<input type='hidden' name="PHP_mon_id" value="{$mon.id}" >
			<input type='hidden' name="PHP_back_str" value="{$back_str}" >
  </form>


</table>

		<table border=1 cellspacing=0 cellpadding=1 width=550 bgcolor=#FFFFFF id='mon_table'>
  <tr bgcolor=#31657B height=25>
    <td class=w10 align=center>DATE</td>
    <td class=w10 align=center>Q'TY</td>
    <td class=w10 align=center>SU</td>
    <td class=w10 align=center>sum-Q'ty</td>
    <td class=w10 align=center>sum-S.U.</td>
    <td class=w10 align=center>&nbsp;</td>
  </tr>
{section name=SEC loop=$mon_det} 
  <tr bgcolor=#ffffff>
    <td class=gry10 align=center>&nbsp;{$mon_det[SEC].out_date}</td>
    <td class=gry10 align=right>&nbsp;{if $mon_det[SEC].hdy == 1}Holday{else}{$mon_det[SEC].qty|number_format}{/if}</td>
    <td class=gry10 align=right>&nbsp;{if $mon_det[SEC].hdy == 1}Holday{else}{$mon_det[SEC].su|number_format}{/if}</td>
    <td class=gry10 align=right>&nbsp;{$mon_det[SEC].sum_qty|number_format}</td>
    <td class=gry10 align=right>&nbsp;{$mon_det[SEC].sum_su|number_format}</td>
    <td class=gry10 align=center>&nbsp;
	  	<input type='image' src="images/del.png"   onclick=del_ajx('{$mon_det[SEC].id}',this)>	
    </td>
  </tr> 
{/section} 
</table>
<form METHOD="POST" name="mon_back" action="{$PHP_SELF}">
		<hr SIZE=2 WIDTH=550>
          <table border=0 cellspacing=0 cellpadding=0 cols=2 width=550>
            <tr> 
              <td align=center>
              			<input type='hidden' name="PHP_action" value="monitor_view" >
              			<input type='hidden' name="PHP_back_str" value="{$back_str}" >
              				<input type='hidden' name="PHP_id" value="{$mon.id}" >
				<input type=submit value=" VIEW " class=select_e style="cursor:pointer; width=95%">
              </td>
   
        </table>
</form>
<!--------- footer ---------->
{include file="footer.html"}
