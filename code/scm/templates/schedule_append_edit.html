{include file="header.html"}
<body class="body_color" onload="resize()" style="overflow-x:hidden;overflow-y:hidden;">
{$Note}
{if $msg_YES}
<table cellpadding="0" cellspacing="0" cols="0" >
	<tr bgcolor=#ffffff> 
		<td width="90" class="gry10" align="center"><img src="images/alert.gif" border="0"></td>
		<td class="msg">{section name=SEC_MSG loop=$msg} {$msg[SEC_MSG]}<br>{/section}</td>
	</tr>
</table>
{/if}
<table border="0" cellspacing="0" cellpadding="0" cols="0" width="100%">
    <tr>
        <form METHOD="POST" id="schedule_append_edit" name="schedule_view">
        <td class="subtitle">
            <table border="0" cellspacing="0" cellpadding="0" cols="0" width="100%">
                <tr>
                    <td>
                        <span class="factory_title">{$fty}</span> Schedule：APPEND / EDIT / 
                        Date : <font size="2" style="cursor:pointer;font-weight:bold;" id="calendar-trigger" color="blue"><img src="./images/cal.gif"> {$pt_date}</font>
                        <font size="2" color="gray">shown dates limit {$limit_date} days</font>
                        <input type="hidden" id="calendar-inputField" name="PHP_pt_date" size="8" value="{$pt_date}" />
                        <input type="hidden" id="PHP_action" name="PHP_action" value="schedule_append_edit">
                        <input type="hidden" id="PHP_fty" name="PHP_fty" value="{$fty}">
                        <!-- <input type="button" id="ReLoad" name="ReLoad" value="ReLoad" /> -->
                        <span id="notes"></span> <span id="m_alert" style="color:#0000FF"></span> <span id="m_mode" style="color:#0000FF"><!-- [{$edit_mode}] --></span>
                    </td>
                    <td align="left">
                        <table border="0" cellspacing="1" cellpadding="0">
                            <tr>
                                <td width="20"></td>
                                <td><table border="0" cellspacing="0" cellpadding="0" height="19" width="19" style="border:solid 1px black;cursor:help;" title="{literal}訂單完成{/literal}&#10;Sewing Completed"><tr><td height="10px" width="10px" bgcolor="#D7D7FF"></td></tr></table></td>
                                <td><table border="0" cellspacing="0" cellpadding="0" height="19" width="19" style="border:solid 1px black;cursor:help;" title="{literal}排產ETF超過出口日{/literal}&#10;Sewing Complete date behind Delivery date"><tr><td height="10px" width="10px" bgcolor="#FD1838"></td></tr></table></td>
                                <td><table border="0" cellspacing="0" cellpadding="0" height="19" width="19" style="border:solid 1px black;cursor:help;" title="{literal}訂單與生產線不同款式{/literal}&#10;Orders and production lines at different Style"><tr><td height="10px" width="10px" bgcolor="#F8FF84"></td></tr></table></td>
                                <td><table border="0" cellspacing="0" cellpadding="0" height="19" width="19" style="border:solid 1px black;cursor:help;" title="{literal}無 BOM{/literal}&#10;Without BOM (BOM didn't be confirmed)"><tr><td height="10px" width="10px" bgcolor="#A36ED4"></td></tr></table></td>
                                <td><table border="0" cellspacing="0" cellpadding="0" height="19" width="19" style="border:solid 1px black;cursor:help;" title="{literal}主料未到齊{/literal}&#10;Fabric not completed for sewing line"><tr><td height="10px" width="10px" bgcolor="#FE00B9"></td></tr></table></td>
                                <td><table border="0" cellspacing="0" cellpadding="0" height="19" width="19" style="border:solid 1px black;cursor:help;" title="{literal}副料未到齊{/literal}&#10;Key Accessory not completed for sewing line"><tr><td height="10px" width="10px" bgcolor="#FFC5F3"></td></tr></table></td>
                                <td><table border="0" cellspacing="0" cellpadding="0" height="19" width="19" style="border:solid 1px black;cursor:help;" title="{literal}生產中{/literal}&#10;Under Producing"><tr><td height="10px" width="10px" bgcolor="#D0FDCD"></td></tr></table></td>
                                <td><table border="0" cellspacing="0" cellpadding="0" height="19" width="19" style="border:solid 1px black;cursor:help;" title="{literal}生產中,超過出口日{/literal}&#10;Under producing but behind Delivery date"><tr><td height="10px" width="10px" bgcolor="#96DDA3"></td></tr></table></td>
                                <td nowrap><span style="border:solid 1px black;cursor:help;" title="{literal}樣本未確認(粗體){/literal}&#10;Sample not been approved for sewing line"><b>Font Bold</b></span></td>
                            </tr>
                        </table>
                    </td>
                    <td align="right">
                        <table border="0" cellspacing="0" cellpadding="0" cols="0" class="mode">
                            <tr>
                                <td id="mode"><img src="./images/xin.gif"> VIEW MODE</td>
                            </tr>
                        </table>
                    </td>
                </tr>
            </table>
        </td>
        </form>
    </tr>
    <tr>
        <td class="space"></td>
    </tr>
    <tr id="add_box_display">
        <td class="subInputName">
            <table id="add_box" border="0" cellspacing="2" cellpadding="0">
                <tr>
                    <td class="item_title_right">Order #<input type="hidden" id="add_p_id" name="add_p_id" value=""><input type="hidden" id="add_ord_num" name="add_ord_num" value=""></td>
                    <td class="item_value_left"><input type="text" id="add_order" name="add_order" value="Input Order #" class="input_order" /></td>
                    <td class="item_title_right">Partial Qty</td>
                    <td class="item_value_left"><span type="text" id="add_p_qty" name="add_p_qty" size="6" value=""/></td>
                    <td class="item_title_right">Line</td>
                    <td class="item_value_left" id="add_line">&nbsp;</td>
                    <td class="item_title_right" rowspan="3">Remark</td>
                    <td class="item_value_left" rowspan="3"><textarea name="add_remark" cols="30" rows="5" id="add_remark"></textarea></td>
                    <td rowspan="3"><input class="item_value_left" type="button" id="add_order_Submit" name="Submit" value="ADD" style="text-align:center;height:88px;width:66px;" /></td>
                </tr>
                <tr>
                    <td class="item_title_right">Style</td>
                    <td class="item_value_left"><span type="text" id="add_style" name="add_style" size="6" value=""/></td>
                    <td class="item_title_right">Scheduled Qty</td>
                    <td class="item_value_left"><span type="text" id="add_s_qty" name="add_s_qty" size="6" value=""/></td>
                    <td class="item_title_right">ETS</td>
                    <td class="item_value_left"><span id="add_ets"></span></td>
                </tr>
                <tr>
                    <td class="item_title_right">ETD</td>
                    <td class="item_value_left"><span type="text" id="add_p_etd" name="add_p_etd" size="7" value=""/></td>
                    <td class="item_title_right">Schedule Qty</td>
                    <td class="item_value_left"><input type="text" id="add_qty" name="add_qty" size="4" value="" style="display:none;" /></td>
                    <td class="item_title_right"></td>
                    <td class="item_value_left"></td>
                </tr>
            </table>
        </td>
    </tr>
    <tr id="add_box_display">
        <td class="space"></td>
    </tr>
    <tr id="in">
        <td valign="top" id="bar">
            <div id="div_line_bar" style="overflow: scroll;width:1300px;height:520px;z-index:1;">
            <table id="bar_main" border="0" cellspacing="0" cellpadding="0" cols="0" >
                <tr class="line_bg_Ym_df">
                    <td class="line_bg_Ym" >{$fty}</td>
                    {section name=CLD loop=$calendar.Ym}
                    <td class="line_bg_Ym" colspan="{$calendar.Ym[CLD].count}">{$calendar.Ym[CLD].Ym}</td>
                    {/section}
                </tr>
                <tr class="line_bg_df">
                    <td class="line_bg_w1">Line</td>
                    {section name=CLD loop=$calendar.d}
                    <td class="{$calendar.bg[CLD]}">{$calendar.d[CLD]}</td>
                    {/section}
                </tr>
                {section name=CLD loop=$schedule}
                <tr class="" id="get_line" line="{$schedule[CLD].line_arr.line}" line_id="{$schedule[CLD].line_arr.id}">
                    <td id="line_link{$schedule[CLD].line_arr.line}" class="line_bg_df" line="{$schedule[CLD].line_arr.line}" avg="{$schedule[CLD].line_arr.day_avg}" people="{$schedule[CLD].line_arr.worker}">
                        {$schedule[CLD].line_arr.line} {if $schedule[CLD].line_arr.style}({$schedule[CLD].line_arr.style|upper|substr:0:1}){/if}
                    </td>
                    <!-- finish -->
                    {section name=DAY loop=$schedule[CLD].finish.day}
                    {if $schedule[CLD].finish.day[DAY].count > 0}
                    <td id="{if $schedule[CLD].finish.day[DAY].ord_str}ms_finish{$schedule[CLD].line_arr.line}{/if}" line="{$schedule[CLD].line_arr.line}" class="{if $schedule[CLD].finish.day[DAY].ord_str}line_bg_finish{else}line_bg_nothing{/if}" colspan="{$schedule[CLD].finish.day[DAY].count}" title="{$schedule[CLD].finish.min} ~ {$schedule[CLD].finish.max}">{$schedule[CLD].finish.day[DAY].ord_str}</td>
                    {/if}
                    {/section}
                    <!-- pdtion -->
                    {section name=DAY loop=$schedule[CLD].pdtion.day}
                    <td id="{if $schedule[CLD].pdtion.day[DAY].ord_str}ms_pdtion{$schedule[CLD].line_arr.line}{/if}" line="{$schedule[CLD].line_arr.line}" class="{if $schedule[CLD].pdtion.day[DAY].ord_str}line_bg_pdtion{else}line_bg_nothing{/if}" colspan="{$schedule[CLD].pdtion.day[DAY].count}" title="{if $schedule[CLD].pdtion.day[DAY].ord_str}{$schedule[CLD].pdtion.min} ~ {$schedule[CLD].pdtion.max}{/if}">{$schedule[CLD].pdtion.day[DAY].ord_str}{$schedule[CLD].pdtion.day[DAY].mks}</td>
                    {/section}
                    <!-- waitting -->
                    {section name=DAY loop=$schedule[CLD].waitting.day}
                    <td id="{if $schedule[CLD].waitting.day[DAY].ord_num}div_order_detail{/if}" name="drag_bar"
                        mk="waitting" 
                        class="{if $schedule[CLD].waitting.day[DAY].ord_num}line_bg_waitting{else}line_bg_nothing{/if}" 
                        colspan="{$schedule[CLD].waitting.day[DAY].count}" 
                        style="background-color:{$schedule[CLD].waitting.day[DAY].color};"
                        
                        s_id="{$schedule[CLD].waitting.day[DAY].s_id}"  
                        p_id="{$schedule[CLD].waitting.day[DAY].p_id}"  
                        ord_num="{$schedule[CLD].waitting.day[DAY].ord_num}" 
                        mks="{$schedule[CLD].waitting.day[DAY].mks}" 
                        pattern="{$schedule[CLD].waitting.day[DAY].pattern}" 
                        styles="{$schedule[CLD].waitting.day[DAY].style}" 
                        ie1="{$schedule[CLD].waitting.day[DAY].ie1}" 
                        ie2="{$schedule[CLD].waitting.day[DAY].ie2}" 
                        ord_qty="{$schedule[CLD].waitting.day[DAY].ord_qty}" 
                        sch_qty="{$schedule[CLD].waitting.day[DAY].sch_qty}" 
                        cut_qty="{$schedule[CLD].waitting.day[DAY].cut_qty}" 
                        out_qty="{$schedule[CLD].waitting.day[DAY].out_qty}" 
                        ets="{$schedule[CLD].waitting.day[DAY].ets}" 
                        etf="{$schedule[CLD].waitting.day[DAY].etf}" 
                        etd="{$schedule[CLD].waitting.day[DAY].etd}" 
                        combine="{$schedule[CLD].waitting.day[DAY].combine_str}" 
                        s_id="{$schedule[CLD].waitting.day[DAY].s_id}" 
                        p_id="{$schedule[CLD].waitting.day[DAY].p_id}" 
                        line="{$schedule[CLD].line_arr.line}" 
                        line_id="{$schedule[CLD].line_arr.id}" 
                        order="{$schedule[CLD].waitting.day[DAY].ord_num} {$schedule[CLD].waitting.day[DAY].mks}"
                        p_ord_qty="{$schedule[CLD].waitting.day[DAY].p_ord_qty}" 
                        p_sch_qty="{$schedule[CLD].waitting.day[DAY].p_sch_qty}" 
                        p_cut_qty="{$schedule[CLD].waitting.day[DAY].p_cut_qty}" 
                        p_out_qty="{$schedule[CLD].waitting.day[DAY].p_out_qty}" 
                        rel_ets="{$schedule[CLD].waitting.day[DAY].rel_ets}" 
                        rel_etf="{$schedule[CLD].waitting.day[DAY].rel_etf}" 
                        pre_ets="{$schedule[CLD].waitting.day[DAY].pre_ets}" 
                        pre_etf="{$schedule[CLD].waitting.day[DAY].pre_etf}" 
                        s_sch_qty="{$schedule[CLD].waitting.day[DAY].s_sch_qty}" 
                        s_out_qty="{$schedule[CLD].waitting.day[DAY].s_out_qty}" 
                        status="{$schedule[CLD].waitting.day[DAY].status}" 
                        des="{$schedule[CLD].waitting.day[DAY].des}" 
                        sc="{$schedule[CLD].waitting.day[DAY].sc}" 
                    >
                        {$schedule[CLD].waitting.day[DAY].ord_nums}{$schedule[CLD].waitting.day[DAY].mks}
                    </td>
                    {/section}
                </tr>
                <!-- finish -->
                {section name=SCH loop=$schedule[CLD].finish.line}
                <tr id="display_{$schedule[CLD].line_arr.line}" name="ms_finish{$schedule[CLD].line_arr.line}" class="line_bg_df" style="display:none" line="{$schedule[CLD].line_arr.line}" line_id="{$schedule[CLD].line_arr.id}">
                    <td class="line_hover_gray">{$schedule[CLD].line_arr.line} <img src="./images/nav-right.gif"></td>
                {section name=DAY loop=$schedule[CLD].finish.line[SCH].day}
                    <!-- title="{if $schedule[CLD].finish.line[SCH].day[DAY].ord_num}{$schedule[CLD].finish.line[SCH].ets} ~ {$schedule[CLD].finish.line[SCH].etf}{/if}" -->
                    <td id="{if $schedule[CLD].finish.line[SCH].day[DAY].ord_num}div_order_detail{/if}" 
                        mk="finish" 
                        class="{if $schedule[CLD].finish.line[SCH].day[DAY].ord_num}line_bg_finish{else}line_bg_nothing{/if}" 
                        colspan="{$schedule[CLD].finish.line[SCH].day[DAY].count}" 
                        
                        s_id="{$schedule[CLD].finish.line[SCH].day[DAY].s_id}"  
                        p_id="{$schedule[CLD].finish.line[SCH].day[DAY].p_id}" 
                        ord_num="{$schedule[CLD].finish.line[SCH].day[DAY].ord_num}" 
                        mks="{$schedule[CLD].finish.line[SCH].day[DAY].mks}" 
                        pattern="{$schedule[CLD].finish.line[SCH].day[DAY].pattern}" 
                        styles="{$schedule[CLD].finish.line[SCH].day[DAY].style}" 
                        ie1="{$schedule[CLD].finish.line[SCH].day[DAY].ie1}" 
                        ie2="{$schedule[CLD].finish.line[SCH].day[DAY].ie2}" 
                        ord_qty="{$schedule[CLD].finish.line[SCH].day[DAY].ord_qty}" 
                        sch_qty="{$schedule[CLD].finish.line[SCH].day[DAY].sch_qty}" 
                        out_qty="{$schedule[CLD].finish.line[SCH].day[DAY].out_qty}" 
                        ets="{$schedule[CLD].finish.line[SCH].day[DAY].ets}" 
                        etf="{$schedule[CLD].finish.line[SCH].day[DAY].etf}" 
                        etd="{$schedule[CLD].finish.line[SCH].day[DAY].etd}" 
                        combine="{$schedule[CLD].finish.line[SCH].day[DAY].combine_str}" 
                        line="{$schedule[CLD].line_arr.line}" 
                        line_id="{$schedule[CLD].line_arr.id}" 
                        order="{$schedule[CLD].finish.line[SCH].day[DAY].ord_num} {$schedule[CLD].finish.line[SCH].day[DAY].mks}"
                        p_ord_qty="{$schedule[CLD].finish.line[SCH].day[DAY].p_ord_qty}" 
                        p_sch_qty="{$schedule[CLD].finish.line[SCH].day[DAY].p_sch_qty}" 
                        p_cut_qty="{$schedule[CLD].finish.line[SCH].day[DAY].p_cut_qty}" 
                        p_out_qty="{$schedule[CLD].finish.line[SCH].day[DAY].p_out_qty}" 
                        rel_ets="{$schedule[CLD].finish.line[SCH].day[DAY].rel_ets}" 
                        rel_etf="{$schedule[CLD].finish.line[SCH].day[DAY].rel_etf}" 
                        pre_ets="{$schedule[CLD].finish.line[SCH].day[DAY].pre_ets}" 
                        pre_etf="{$schedule[CLD].finish.line[SCH].day[DAY].pre_etf}" 
                        s_sch_qty="{$schedule[CLD].finish.line[SCH].day[DAY].s_sch_qty}" 
                        s_out_qty="{$schedule[CLD].finish.line[SCH].day[DAY].s_out_qty}" 
                        status="{$schedule[CLD].finish.line[SCH].day[DAY].status}" 
                        des="{$schedule[CLD].finish.line[SCH].day[DAY].des}" 
                        sc="{$schedule[CLD].finish.line[SCH].day[DAY].sc}" 
                    >
                        {$schedule[CLD].finish.line[SCH].day[DAY].ord_num}{$schedule[CLD].finish.line[SCH].day[DAY].mks}
                    </td>
                {/section}
                </tr>
                {/section}
                <!-- pdtion -->
                {section name=SCH loop=$schedule[CLD].pdtion.line}
                <tr id="display_{$schedule[CLD].line_arr.line}" name="ms_pdtion{$schedule[CLD].line_arr.line}" class="line_bg_df" style="display:none" line="{$schedule[CLD].line_arr.line}" line_id="{$schedule[CLD].line_arr.id}">
                    <td class="line_hover_green">{$schedule[CLD].line_arr.line} <img src="./images/nav-right.gif"></td>
                {section name=DAY loop=$schedule[CLD].pdtion.line[SCH].day}
                    <!-- title="{if $schedule[CLD].pdtion.line[SCH].day[DAY].ord_num}{$schedule[CLD].pdtion.line[SCH].rel_ets} ~ {$schedule[CLD].pdtion.line[SCH].rel_etf}{/if}" -->
                    <td id="{if $schedule[CLD].pdtion.line[SCH].day[DAY].ord_num}div_order_detail{/if}" 
                        mk="pdtion" 
                        class="{if $schedule[CLD].pdtion.line[SCH].day[DAY].ord_num}{$schedule[CLD].pdtion.line[SCH].day[DAY].color}{else}line_bg_nothing{/if}" 
                        colspan="{$schedule[CLD].pdtion.line[SCH].day[DAY].count}" ord_num="{$schedule[CLD].pdtion.line[SCH].day[DAY].ord_num}" 
                        
                        s_id="{$schedule[CLD].pdtion.line[SCH].day[DAY].s_id}" 
                        p_id="{$schedule[CLD].pdtion.line[SCH].day[DAY].p_id}" 
                        ord_num="{$schedule[CLD].pdtion.line[SCH].day[DAY].ord_num}" 
                        mks="{$schedule[CLD].pdtion.line[SCH].day[DAY].mks}" 
                        pattern="{$schedule[CLD].pdtion.line[SCH].day[DAY].pattern}" 
                        styles="{$schedule[CLD].pdtion.line[SCH].day[DAY].style}" 
                        ie1="{$schedule[CLD].pdtion.line[SCH].day[DAY].ie1}" 
                        ie2="{$schedule[CLD].pdtion.line[SCH].day[DAY].ie2}" 
                        ord_qty="{$schedule[CLD].pdtion.line[SCH].day[DAY].ord_qty}" 
                        sch_qty="{$schedule[CLD].pdtion.line[SCH].day[DAY].sch_qty}" 
                        out_qty="{$schedule[CLD].pdtion.line[SCH].day[DAY].out_qty}" 
                        ets="{$schedule[CLD].pdtion.line[SCH].day[DAY].ets}" 
                        etf="{$schedule[CLD].pdtion.line[SCH].day[DAY].etf}" 
                        etd="{$schedule[CLD].pdtion.line[SCH].day[DAY].etd}" 
                        combine="{$schedule[CLD].pdtion.line[SCH].day[DAY].combine_str}" 
                        line="{$schedule[CLD].line_arr.line}" 
                        line_id="{$schedule[CLD].line_arr.id}" 
                        order="{$schedule[CLD].pdtion.line[SCH].day[DAY].ord_num} {$schedule[CLD].pdtion.line[SCH].day[DAY].mks}"
                        p_ord_qty="{$schedule[CLD].pdtion.line[SCH].day[DAY].p_ord_qty}" 
                        p_sch_qty="{$schedule[CLD].pdtion.line[SCH].day[DAY].p_sch_qty}" 
                        p_cut_qty="{$schedule[CLD].pdtion.line[SCH].day[DAY].p_cut_qty}" 
                        p_out_qty="{$schedule[CLD].pdtion.line[SCH].day[DAY].p_out_qty}" 
                        rel_ets="{$schedule[CLD].pdtion.line[SCH].day[DAY].rel_ets}" 
                        rel_etf="{$schedule[CLD].pdtion.line[SCH].day[DAY].rel_etf}"  
                        pre_ets="{$schedule[CLD].pdtion.line[SCH].day[DAY].pre_ets}" 
                        pre_etf="{$schedule[CLD].pdtion.line[SCH].day[DAY].pre_etf}" 
                        s_sch_qty="{$schedule[CLD].pdtion.line[SCH].day[DAY].s_sch_qty}" 
                        s_out_qty="{$schedule[CLD].pdtion.line[SCH].day[DAY].s_out_qty}" 
                        status="{$schedule[CLD].pdtion.line[SCH].day[DAY].status}" 
                        des="{$schedule[CLD].pdtion.line[SCH].day[DAY].des}" 
                        sc="{$schedule[CLD].pdtion.line[SCH].day[DAY].sc}" 
                    >
                        {$schedule[CLD].pdtion.line[SCH].day[DAY].ord_num}{$schedule[CLD].pdtion.line[SCH].day[DAY].mks}
                    </td>
                {/section}
                </tr>
                {/section}
                
                {/section}
            </table>
            </div>
        </td>
    </tr>
    <tr id="un" style="display:none;">
        <td valign="top" id="bar">
            <table id="un" border="1" cellspacing=0 cellpadding=0 id="mat_table" bgcolor="#666666">	
                <tr>
                    <td class="ListName" title="ORDER#">ORDER#</td>
                    <td class="ListName" title="Combine#">Combine#</td>
                    <td class="ListName" title="style">style</td>
                    <td class="ListName" title="ORD. QTY">ORD. QTY</td>
                    <td class="ListName" title="ORD. SU">ORD. SU</td>
                    <td class="ListName" title="REM. QTY">REM. QTY</td>
                    <td class="ListName" title="ETD">ETD</td>
                    <td class="ListName" title="Lead Time">Lead Time</td>
                    <td class="ListName" title="PATTERN">PATTERN</td>
                    <td class="ListName" title="Fab. RCVD.">Fab. RCVD.</td>
                    <td class="ListName" title="Acc. RCVD.">Acc. RCVD.</td>
                    <td class="ListName" title="Descript">Descript</td>
                    <td class="ListName" title="STATUS">STATUS</td>
                </tr>		
             {section name=SEC loop=$ord_rec} 
                <tr class="list_over">
                    <td class="ListValueCenter">{$ord_rec[SEC].order_num}{if $ord_rec[SEC].partial_num > 1} ({$ord_rec[SEC].mks}){/if}</td>
                    <td class="ListValueCenter">{$ord_rec[SEC].combine}</td>
                    <td class="ListValueCenter">{$ord_rec[SEC].style}</td>
                    <td class="ListValueLeft">{$ord_rec[SEC].qty|NUMBER_FORMAT}</td>
                    <td class="ListValueLeft">{$ord_rec[SEC].su|NUMBER_FORMAT}</td>
                    <td class="ListValueLeft">{$ord_rec[SEC].rem_qty|NUMBER_FORMAT}</td>
                    <td class="ListValueLeft">{$ord_rec[SEC].etd}</td>
                    <td class="ListValueCenter">&nbsp;{$ord_rec[SEC].lead_time}</td>
                    <td class="ListValueLeft">{if $ord_rec[SEC].ptn_upload != '0000-00-00'}{$ord_rec[SEC].ptn_upload}{else}&nbsp;{/if}</td>
                    <td class="ListValueCenter">{if $ord_rec[SEC].mat_shp != '1111-11-11' and $ord_rec[SEC].mat_shp != ''}{$ord_rec[SEC].mat_shp}{else}&nbsp;{/if}</td>
                    <td class="ListValueCenter">{if $ord_rec[SEC].m_acc_shp != '1111-11-11' and $ord_rec[SEC].m_acc_shp != ''}{$ord_rec[SEC].m_acc_shp}{else}&nbsp;{/if}</td>
                    <td class="ListValueLeft">&nbsp;{$ord_rec[SEC].des}</td>
                    <td class="ListValueCenter">
                    <small>
                    {if $ord_rec[SEC].status == 4}<span class=b9><b>APVED</b></span>
                    {elseif $ord_rec[SEC].status == 5}<span class=ssign><b>Reject</b></span>
                    {elseif $ord_rec[SEC].status == 6}<span class=gry9><b>SCHDL CFMing</b></span>
                    {elseif $ord_rec[SEC].status == 7}<span class=b9><b>SCHDL CFMed</b></span>
                    {elseif $ord_rec[SEC].status == 8}<span class=b9><b>PRODUCING</b></span>
                    {elseif $ord_rec[SEC].status == 10}<span class=b9><b>= FINISHED =</b></span>
                    {else}&nbsp;{/if}
                    </small>
                    </td>
                </tr>
             {/section} 
            </table>
        </td>
    </tr>
</table>
<div id="div_calendar" style="position:absolute;overflow-x:hidden;overflow-y:auto;display:none;height:66px;width:1300px;z-index:3;">
<table border="0" cellspacing="0" cellpadding="0" cols="0" >
    <tr class="line_bg_Ym_df">
        <td class="line_bg_Ym" >{$fty}</td>
        {section name=CLD loop=$calendar.Ym}
        <td class="line_bg_Ym" colspan="{$calendar.Ym[CLD].count}">{$calendar.Ym[CLD].Ym}</td>
        {/section}
    </tr>
    <tr class="line_bg_df">
        <td class="line_bg_w1">Line</td>
        {section name=CLD loop=$calendar.d}
        <td class="{$calendar.bg[CLD]}">{$calendar.d[CLD]}</td>
        {/section}
    </tr>
    {section name=CLD loop=$schedule}
    <tr class="">
        <td id="line_link{$schedule[CLD].line_arr.line}" class="" line="{$schedule[CLD].line_arr.line}" avg="{$schedule[CLD].line_arr.day_avg}" people="{$schedule[CLD].line_arr.worker}" nowrap>
            {$schedule[CLD].line_arr.line} {if $schedule[CLD].line_arr.style}({$schedule[CLD].line_arr.style|upper|substr:0:1}){/if}
        </td>
        <!-- finish -->
        {section name=DAY loop=$schedule[CLD].finish.day}
        {if $schedule[CLD].finish.day[DAY].count > 0}
        <td id="ms_finish{$schedule[CLD].line_arr.line}" line="{$schedule[CLD].line_arr.line}" class="{if $schedule[CLD].finish.day[DAY].ord_str}line_bg_finish{else}line_bg_nothing{/if}" colspan="{$schedule[CLD].finish.day[DAY].count}" title="{$schedule[CLD].finish.min} ~ {$schedule[CLD].finish.max}">{$schedule[CLD].finish.day[DAY].ord_str}</td>
        {/if}
        {/section}
        <!-- pdtion -->
        {section name=DAY loop=$schedule[CLD].pdtion.day}
        <td id="ms_pdtion{$schedule[CLD].line_arr.line}" line="{$schedule[CLD].line_arr.line}" class="{if $schedule[CLD].pdtion.day[DAY].ord_str}line_bg_pdtion{else}line_bg_nothing{/if}" colspan="{$schedule[CLD].pdtion.day[DAY].count}" title="{if $schedule[CLD].pdtion.day[DAY].ord_str}{$schedule[CLD].pdtion.min} ~ {$schedule[CLD].pdtion.max}{/if}">{$schedule[CLD].pdtion.day[DAY].ord_str}{$schedule[CLD].pdtion.day[DAY].mks}</td>
        {/section}
        <!-- waitting -->
        {section name=DAY loop=$schedule[CLD].waitting.day}
        <td class="{if $schedule[CLD].waitting.day[DAY].ord_num}line_bg_waitting{else}line_bg_nothing{/if}" colspan="{$schedule[CLD].waitting.day[DAY].count}" title="{if $schedule[CLD].waitting.day[DAY].ord_num}{$schedule[CLD].waitting.day[DAY].rel_ets} ~ {$schedule[CLD].waitting.day[DAY].rel_etf}{/if}">{$schedule[CLD].waitting.day[DAY].ord_nums}{$schedule[CLD].waitting.day[DAY].mks}</td>
        {/section}
    </tr>
    <!-- finish -->
    {section name=SCH loop=$schedule[CLD].finish.line}
    <tr id="display_{$schedule[CLD].line_arr.line}" name="ms_finish{$schedule[CLD].line_arr.line}" class="line_bg_df" style="display:none">
        <td class="line_hover_gray">{$schedule[CLD].line_arr.line} <img src="./images/nav-right.gif"></td>
    {section name=DAY loop=$schedule[CLD].finish.line[SCH].day}
        <td class="{if $schedule[CLD].finish.line[SCH].day[DAY].ord_num}line_bg_finish{else}line_bg_nothing{/if}" colspan="{$schedule[CLD].finish.line[SCH].day[DAY].count}" title="{if $schedule[CLD].finish.line[SCH].day[DAY].ord_num}{$schedule[CLD].finish.line[SCH].ets} ~ {$schedule[CLD].finish.line[SCH].etf}{/if}">{$schedule[CLD].finish.line[SCH].day[DAY].ord_num}{$schedule[CLD].finish.line[SCH].day[DAY].mks}</td>
    {/section}
    </tr>
    {/section}
    <!-- pdtion -->
    {section name=SCH loop=$schedule[CLD].pdtion.line}
    <tr id="display_{$schedule[CLD].line_arr.line}" name="ms_pdtion{$schedule[CLD].line_arr.line}" class="line_bg_df" style="display:none">
        <td class="line_hover_green">{$schedule[CLD].line_arr.line} <img src="./images/nav-right.gif"></td>
    {section name=DAY loop=$schedule[CLD].pdtion.line[SCH].day}
        <td class="{if $schedule[CLD].pdtion.line[SCH].day[DAY].ord_num}line_bg_pdtion{else}line_bg_nothing{/if}" colspan="{$schedule[CLD].pdtion.line[SCH].day[DAY].count}" title="{if $schedule[CLD].pdtion.line[SCH].day[DAY].ord_num}{$schedule[CLD].pdtion.line[SCH].rel_ets} ~ {$schedule[CLD].pdtion.line[SCH].rel_etf}{/if}">{$schedule[CLD].pdtion.line[SCH].day[DAY].ord_num}{$schedule[CLD].pdtion.line[SCH].day[DAY].mks}</td>
    {/section}
    </tr>
    {/section}
    
    {/section}
</table>
</div>
<div id="div_line" style="position:absolute;overflow:hidden;display:none;height:520px;width:74px;z-index:0;">
<table border="0" cellspacing="0" cellpadding="0" cols="0" >
    <tr class="line_bg_Ym_df">
        <td class="line_bg_Ym">{$fty}</td>
        {section name=CLD loop=$calendar.Ym}
        <td class="line_bg_Ym" colspan="{$calendar.Ym[CLD].count}">{$calendar.Ym[CLD].Ym}</td>
        {/section}
    </tr>
    <tr class="line_bg_df">
        <td class="line_bg_w1">Line</td>
        {section name=CLD loop=$calendar.d}
        <td class="{$calendar.bg[CLD]}">{$calendar.d[CLD]}</td>
        {/section}
    </tr>
    {section name=CLD loop=$schedule}
    <tr class="line_bg_df">
        <td id="line_link{$schedule[CLD].line_arr.line}" class="line_bg_df" line="{$schedule[CLD].line_arr.line}" avg="{$schedule[CLD].line_arr.day_avg}" people="{$schedule[CLD].line_arr.worker}">
            {$schedule[CLD].line_arr.line} {if $schedule[CLD].line_arr.style}({$schedule[CLD].line_arr.style|upper|substr:0:1}){/if}
        </td>
        <!-- finish -->
        {section name=DAY loop=$schedule[CLD].finish.day}
        <td id="ms_finish{$schedule[CLD].line_arr.line}" line="{$schedule[CLD].line_arr.line}" class="{if $schedule[CLD].finish.day[DAY].ord_str}line_bg_finish{else}line_bg_nothing{/if}" colspan="{$schedule[CLD].finish.day[DAY].count}" title="{$schedule[CLD].finish.min}~{$schedule[CLD].finish.max}">{$schedule[CLD].finish.day[DAY].ord_str}</td>
        {/section}
        <!-- pdtion -->
        {section name=DAY loop=$schedule[CLD].pdtion.day}
        <td id="ms_pdtion{$schedule[CLD].line_arr.line}" line="{$schedule[CLD].line_arr.line}" class="{if $schedule[CLD].pdtion.day[DAY].ord_str}line_bg_pdtion{else}line_bg_nothing{/if}" colspan="{$schedule[CLD].pdtion.day[DAY].count}" title="{$schedule[CLD].pdtion.min}~{$schedule[CLD].pdtion.max}">{$schedule[CLD].pdtion.day[DAY].ord_str}{$schedule[CLD].pdtion.day[DAY].mks}</td>
        {/section}
        <!-- waitting -->
        {section name=DAY loop=$schedule[CLD].waitting.day}
        <td class="{if $schedule[CLD].waitting.day[DAY].ord_num}line_bg_waitting{else}line_bg_nothing{/if}" colspan="{$schedule[CLD].waitting.day[DAY].count}" title="{$schedule[CLD].waitting.day[DAY].rel_ets}~{$schedule[CLD].waitting.day[DAY].rel_etf}">{$schedule[CLD].waitting.day[DAY].ord_num}{$schedule[CLD].waitting.day[DAY].mks}</td>
        {/section}
    </tr>
    <!-- finish -->
    {section name=SCH loop=$schedule[CLD].finish.line}
    <tr id="display_{$schedule[CLD].line_arr.line}" name="ms_finish{$schedule[CLD].line_arr.line}" class="line_bg_df" style="display:none">
        <td class="line_hover_gray">{$schedule[CLD].line_arr.line} <img src="./images/nav-right.gif"></td>
    {section name=DAY loop=$schedule[CLD].finish.line[SCH].day}
        <td class="{if $schedule[CLD].finish.line[SCH].day[DAY].ord_num}line_bg_finish{else}line_bg_nothing{/if}" colspan="{$schedule[CLD].finish.line[SCH].day[DAY].count}" title="{$schedule[CLD].finish.line[SCH].ets}~{$schedule[CLD].finish.line[SCH].etf}">{$schedule[CLD].finish.line[SCH].day[DAY].ord_num}{$schedule[CLD].finish.line[SCH].day[DAY].mks}</td>
    {/section}
    </tr>
    {/section}
    <!-- pdtion -->
    {section name=SCH loop=$schedule[CLD].pdtion.line}
    <tr id="display_{$schedule[CLD].line_arr.line}" name="ms_pdtion{$schedule[CLD].line_arr.line}" class="line_bg_df" style="display:none">
        <td class="line_hover_green">{$schedule[CLD].line_arr.line} <img src="./images/nav-right.gif"></td>
    {section name=DAY loop=$schedule[CLD].pdtion.line[SCH].day}
        <td class="{if $schedule[CLD].pdtion.line[SCH].day[DAY].ord_num}line_bg_pdtion{else}line_bg_nothing{/if}" colspan="{$schedule[CLD].pdtion.line[SCH].day[DAY].count}" title="{$schedule[CLD].pdtion.line[SCH].rel_ets}~{$schedule[CLD].pdtion.line[SCH].rel_etf}">{$schedule[CLD].pdtion.line[SCH].day[DAY].ord_num}{$schedule[CLD].pdtion.line[SCH].day[DAY].mks}</td>
    {/section}
    </tr>
    {/section}
    
    {/section}
</table>
<br>
<br>
<br>
</div>
<div id="div_line_detail" style="position:absolute;overflow:hidden;display:none;z-index:1;">
<table border="0" cellspacing="0" cellpadding="0" cols="0" >
    <tr class="line_bg_df">
        <td class="line_bg_w1">Line</td>
        <td class="line_bg_waitting" id="line">Line</td>
    </tr>
    <tr class="line_bg_df">
        <td class="line_bg_w1">People</td>
        <td class="line_bg_waitting" id="people">People</td>
    </tr>
    <tr class="line_bg_df">
        <td class="line_bg_w1">Avg</td>
        <td class="line_bg_waitting" id="avg">Avg</td>
    </tr>
</table>
</div>
<div id="div_order_detail" style="position:absolute;overflow:hidden;display:none;z-index:10;">
<table border="0" cellspacing="0" cellpadding="0">
    <tr>
        <td style="height:9px;width:9px;background-image:url(images/t_l.png);background-position:center bottom;background-repeat:repeat-x;"></td>
        <td style="height:9px;background-image:url(images/t_m.png);background-position:center bottom;background-repeat:repeat-x;"></td>
        <td style="height:9px;width:9px;background-image:url(images/t_r.png);background-position:center bottom;background-repeat:repeat-x;"></td>
    </tr>
    <tr>
        <td width="9" valign="top" background="images/m_l.png"><img src="images/m_lt.png" width="9" height="5"></td>
        <td bgcolor="#FFFFFF">
            <table border="0" cellpadding="3" cellspacing="1">
                <tr>
                    <td>
                        <table width="" border="0" cellpadding="1" cellspacing="1">
                            <tr>
                                <td align="center" class="monitor_title" colspan="2" nowrap><span id="order" ></span></td>
                            </tr>
                            <tr class="monitor_item1">
                                <td align="right" nowrap>STYLE：</td>
                                <td nowrap>&nbsp;<span id="Style" ></span></td>
                            </tr>
                            <tr class="monitor_item2">
                                <td align="right" nowrap>Cale. IE：</td>
                                <td nowrap>&nbsp;<span id="ie1" ></span></td>
                            </tr>
                            <tr class="monitor_item1">
                                <td align="right" nowrap>Final IE：</td>
                                <td nowrap>&nbsp;<span id="ie2" ></span></td>
                            </tr>
                            <tr class="monitor_item2">
                                <td align="right" nowrap>Pattern：</td>
                                <td nowrap>&nbsp;<span id="pattern" ></span></td>
                            </tr>
                            <tr>
                                <td align="center" class="monitor_title2" colspan="2" nowrap>Schedule  Q'ty</td>
                            </tr>
                            <tr class="monitor_item1">
                                <td align="right" class="B" nowrap>Order：</td>
                                <td nowrap>&nbsp;<span id="ord_qty" ></span></td>
                            </tr>
                            <tr class="monitor_item2">
                                <td align="right" class="B" nowrap>Schedule：</td>
                                <td nowrap>&nbsp;<span id="sch_qty" ></span></td>
                            </tr>
                            <tr class="monitor_item1">
                                <td align="right" class="B" nowrap>OutPut：</td>
                                <td nowrap>&nbsp;<span id="out_qty" ></span></td>
                            </tr>
                            <tr>
                                <td align="center" class="monitor_title2" colspan="2" nowrap>Schedule Plan</td>
                            </tr>
                            <tr class="monitor_item1">
                                <td align="right" class="B" nowrap>ETS：</td>
                                <td nowrap>&nbsp;<span id="ETS" ></span></td>
                            </tr>
                            <tr class="monitor_item2">
                                <td align="right" class="B" nowrap>ETF：</td>
                                <td nowrap>&nbsp;<span id="ETF" ></span></td>
                            </tr>
                            <tr class="monitor_item1">
                                <td align="right" class="B" nowrap>ETD：</td>
                                <td nowrap>&nbsp;<span id="ETD" ></span></td>
                            </tr>
                            <tr id="combine">
                                <td align="center" class="monitor_title2" colspan="2" nowrap>Combine Order</td>
                            </tr>
                            <tr id="combine" class="monitor_item1">
                                <td nowrap colspan="2">&nbsp;<span id="Combine_Order"></span></td>
                            </tr>
                        </table>
                    </td>
                </tr>
            </table>
        </td>
        <td width="9" valign="top" background="images/m_r.png"><img src="images/m_rt.png" width="9" height="5"></td>
    </tr>
    <tr>
        <td style="height:9px;width:9px;background-image:url(images/b_l.png);background-position:center top;background-repeat:repeat-x;"></td>
        <td style="height:9px;background-image:url(images/b_m.png);background-position:center top;background-repeat:repeat-x;"></td>
        <td style="height:9px;width:9px;background-image:url(images/b_r.png);background-position:center top;background-repeat:repeat-x;"></td>
    </tr>
</table>
</div>
<div id="div_order_edit" style="position:absolute;overflow:hidden;display:none;z-index:3;">
<table border="0" cellspacing="0" cellpadding="0" cols="0" >
    <tr>
        <td>
            <table border="0" cellspacing="0" cellpadding="0" cols="0" >
                <tr>
                    <td width="10" height="10" background="images/box/w_box_t_l.png"></td>
                    <td background="images/box/w_box_t_m.png"></td>
                    <td width="10" height="10" background="images/box/w_box_t_m.png"></td>
                </tr>
                <tr>
                    <td background="images/box/w_box_m_l.png"></td>
                    <td background="images/box/w_box_m_m.png">
                        <table border="0" cellspacing="3" cellpadding="0" cols="0" >
                            <tr>
                                <td align="left" colspan="2">
                                    <table border="0" cellspacing="0" cellpadding="3" cols="0">
                                        <tr>
                                            <td class="line_title" id="line">Line</td>
                                            <td class="line_order" id="order">order</td>
                                        </tr>
                                    </table>
                                </td>
                            </tr>
                            <tr>
                                <td colspan="2"><hr></td>
                            </tr>
                            <tr align="right">
                                <td width="120">Partial Qty：</td>
                                <td id="p_ord_qty"></td>
                            </tr>
                            <tr align="right">
                                <td>Schedule Qty：</td>
                                <td id="p_sch_qty"></td>
                            </tr>
                            <tr align="right">
                                <td>Cutting Qty：</td>
                                <td id="p_cut_qty"></td>
                            </tr>
                            <tr align="right">
                                <td>Output Qty：</td>
                                <td id="p_out_qty"></td>
                            </tr>
                            <tr>
                                <td colspan="2"><hr></td>
                            </tr>
                            <tr>
                                <td colspan="2"></td>
                            </tr>
                        </table>
                    </td>
                    <td background="images/box/w_box_m_m.png"></td>
                </tr>
                <tr>
                    <td width="10" height="10" background="images/box/w_box_b_l.png"></td>
                    <td background="images/box/w_box_b_m.png"></td>
                    <td width="10" height="10" background="images/box/w_box_b_m.png"></td>
                </tr>
            </table>
        </td>
        <td>
            <table border="0" cellspacing="0" cellpadding="0" cols="0" >
                <tr>
                    <td width="10" background="images/box/w_box_t_l.png"></td>
                    <td background="images/box/w_box_t_m.png"></td>
                    <td width="10" height="10" background="images/box/w_box_t_r.png"></td>
                </tr>
                <tr>
                    <td background="images/box/w_box_m_l.png">
                    <td background="images/box/w_box_m_m.png">
                        <table border="0" cellspacing="0" cellpadding="0" cols="0" >
                            <tr>
                                <td></td>
                                <td align="right"><img id="close" class="m_p" src="images/temp/close05.gif" width="53" height="16" title="CLOSE"></td>
                            </tr>
                            <tr>
                                <td colspan="2"><hr></td>
                            </tr>
                            <tr>
                                <td align="right">Output Qty：</td>
                                <td id="s_out_qty" align="left">s_out_qty</td>
                            </tr>
                            <tr>
                                <td colspan="2"><hr></td>
                            </tr>
                            <tr>
                                <td align="right">Schedule Qty：</td>
                                <td id="s_sch_qty" align="left"><span id="s_sch_qty">s_sch_qty</span><input size="6" type="text" id="s_sch_qty" name="PHP_s_sch_qty"></td>
                            </tr>
                            <tr>
                                <td align="right">Pre-ETS：</td>
                                <td align="left"><span id="spre_ets">pre_ets</span><input size="8" type="text" id="pre_ets" name="PHP_pre_ets"></td>
                            </tr>
                            <tr>
                                <td align="right">Pre-ETF：</td>
                                <td align="left"><span id="spre_etf">pre_etf</span><input size="8" type="text" id="pre_etf" name="PHP_pre_etf"></td>
                            </tr>
                            <tr>
                                <td align="right">Remark：</td>
                                <td align="left"><span id="des">des</span><input size="8" type="text" id="des" name="PHP_remark"></td>
                            </tr>
                            <tr>
                                <td colspan="2"><hr></td>
                            </tr>
                            <tr>
                                <td colspan="2"><input type="button" id="Finish" value="Finish"> <input type="button" id="ReOpen" value="ReOpen"> <input type="button" id="Delete" value="Delete"> <input type="button" id="Update" value="Update"></td>
                            </tr>                            
                        </table>
                    </td>
                    <td background="images/box/w_box_m_r.png"></td>
                </tr>
                <tr>
                    <td background="images/box/w_box_b_l.png"></td>
                    <td background="images/box/w_box_b_m.png"></td>
                    <td width="10" height="10" background="images/box/w_box_b_r.png"></td>
                </tr>
            </table>
        </td>
    </tr>
</table>
<input type="hidden" id="PHP_ord_num" name="PHP_ord_num" value="">
<input type="hidden" id="PHP_s_id" name="PHP_s_id" value="">
<input type="hidden" id="PHP_p_id" name="PHP_p_id" value="">
<input type="hidden" id="PHP_line_id" name="PHP_line_id" value="">
<input type="hidden" id="PHP_line" name="PHP_line" value="">
<input type="hidden" id="PHP_mks" name="PHP_mks" value="">
<input type="hidden" id="ie" name="ie" value="">
</div>

{literal}
<script type="text/javascript">
    cal = Calendar.setup({
        weekNumbers : false,
        trigger     : "calendar-trigger",
        inputField  : "calendar-inputField",
        date        : {/literal}{$pt_dates}{literal} ,
        selection   : {/literal}{$pt_dates}{literal} ,
        showTime    : false,
        onSelect: function() {
            this.hide();
            $('#calendar-trigger').html($('#calendar-inputField').val());
            $('#schedule_append_edit').submit();
            $.blockUI();
        }
    });
    cal = Calendar.setup({
        weekNumbers : false,
        trigger     : "pre_ets",
        inputField  : "pre_ets",
        date        : {/literal}{$today}{literal} ,
        selection   : {/literal}{$today}{literal} ,
        showTime    : false,
        onSelect: function() { this.hide(); }
    });
    cal = Calendar.setup({
        weekNumbers : false,
        trigger     : "pre_etf",
        inputField  : "pre_etf",
        date        : {/literal}{$today}{literal} ,
        selection   : {/literal}{$today}{literal} ,
        showTime    : false,
        onSelect: function() { this.hide(); }
    });

    keyctrl = ({/literal}{$edit_mode}{literal} == true )? {/literal}{$edit_mode}{literal} : false ;
    auto_order = true;
    available = decodeURI("{/literal}{$available}{literal}");
    availableTags = available.split(",");

</script>
{/literal}
{include file="footer.html"}
