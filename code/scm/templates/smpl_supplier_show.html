<html>
<head>
   <meta http-equiv="Content-Type" content="text/html; charset=big5">
   <title>===:::::::::: SCM -B [ ORDER RECORD ] ::::::::::===</title>
<link rel=stylesheet type="text/css" href="./bom.css">
{literal}
<Script language="javascript">
 
function cfm_revise(ord_num,status) {
//	var T = '';
//		T = window.document.forms['add'].elements['qty_'+pd_id].value;
	if ( confirm("are you sure to REVISE order :#[ "+ord_num+" ] ?\r\rEvery Revise event will cancel entire process had done !\rAnd restart the Order procedure from beginning Again !\r\rBe sure this is OK for you!")) {
		cgiget="{/literal} {$cgistr_get}{literal}&cgino={/literal}{$start_no}{literal}&cgi_1={/literal}{$cgi.dept}{literal}&cgi_2={/literal}{$cgi.order_num}{literal}&cgi_3={/literal}{$cgi.cust}{literal}&cgi_4={/literal}{$cgi.ref}{literal}&cgi_5={/literal}{$cgi.factory}{literal}";
		location.href="index2.php?PHP_action=revise_order&PHP_ord_num="+ord_num+"&PHP_status="+status;
	} 
}
 
function cfm_shift(ord_num,status) {
//	var T = '';
//		T = window.document.forms['add'].elements['qty_'+pd_id].value;
	if ( confirm("are you sure to SHIFT order :#[ "+ord_num+" ] ?\r\rTo other factory ?")) {
		cgiget="{/literal} {$cgistr_get}{literal}&cgino={/literal}{$start_no}{literal}&cgi_1={/literal}{$cgi.dept}{literal}&cgi_2={/literal}{$cgi.order_num}{literal}&cgi_3={/literal}{$cgi.cust}{literal}&cgi_4={/literal}{$cgi.ref}{literal}&cgi_5={/literal}{$cgi.factory}{literal}";
		location.href="index2.php?PHP_action=shift_order&PHP_ord_num="+ord_num+"&PHP_status="+status;
	} 
}


function openRemote(file)
  {
 var gofile = 'index2.php?PHP_action=revise_order_view&PHP_id='+ file ;
window.open(gofile,'_new','toolbar=no,location=no,directories=no,status=no,menubar=no,scrollbars=yes,resizable=yes,copyhistory=no,width=740,height=600 top=30, left=100');
  }
  


function Show_ord(id,ord_num) {
	 var url ='index2.php?PHP_action=order_view&PHP_id='+id+'&cgiget=&cgino=&cgi_1=&cgi_2=&cgi_3=&cgi_4=&cgi_5=&PHP_ord_num='+ord_num; 	
	 var nm = 'Order';
	window.open2(url,nm,'toolbar=no,location=no,directories=no,status=no,menubar=no,scrollbars=yes,resizable=yes,copyhistory=no,width=800,height=600 top=50, left=100');
}

function Show_ord_wi(id) {
	 var url ='index2.php?PHP_action=smpl_wi_view&PHP_ex_order=1&PHP_id='+id+'&PHP_sr=&PHP_dept_code=&PHP_num=&PHP_cust=&PHP_ref=&PHP_factory=&PHP_etdstr=&PHP_etdfsh='; 	
	 var nm = 'Sworking';
	window.open2(url,nm,'toolbar=no,location=no,directories=no,status=no,menubar=no,scrollbars=yes,resizable=yes,copyhistory=no,width=800,height=600 top=50, left=100');
}

function Show_ord_ti(id) {
	 var url ='index2.php?PHP_action=smpl_wi_view&PHP_ex_order=1&PHP_ti=1&PHP_id='+id+'&PHP_sr=&PHP_dept_code=&PHP_num=&PHP_cust=&PHP_ref=&PHP_factory=&PHP_etdstr=&PHP_etdfsh='; 	
	 var nm = 'Sworking';
	window.open2(url,nm,'toolbar=no,location=no,directories=no,status=no,menubar=no,scrollbars=yes,resizable=yes,copyhistory=no,width=800,height=600 top=50, left=100');
}

function Show_ord_bom(id) {
	 var url ='index2.php?PHP_action=smpl_bom_view&PHP_ex_order=1&PHP_id='+id+'&PHP_sr=&PHP_dept_code=&PHP_etdstr=&PHP_cust=&PHP_wi_num=&PHP_etdfsh='; 	
	 var nm = 'Sworking';
	window.open2(url,nm,'toolbar=no,location=no,directories=no,status=no,menubar=no,scrollbars=yes,resizable=yes,copyhistory=no,width=800,height=600 top=50, left=100');
}

function message_out(user_id) {
	 var url ='notify.php?PHP_action=message_send&PHP_user_id='+user_id;
	 var nm = 'message';
	 window.open2(url,nm,'toolbar=no,location=no,directories=no,status=no,menubar=no,scrollbars=yes,resizable=yes,copyhistory=no,width=700,height=500 top=50, left=100');
}

</script>
<script language="javascript">
window.open2=window.open; //在此把window.open()函數複製一份給window.open2，未來若要開新視窗則執行window.open2()即可
window.open=function(){return (new Object())}; //把window.open()函數變成空白函數，令提供者的跳窗無法顯示
</script> 
{/literal}
</head>
<body>
<br>
<table cellspacing=1 cellpadding=4 cols=1 width=720 bgcolor=#333333>
   <tr>
	 <td class="des" align=center height=28> [ <b>SAMPLE ORDER # {$order.num}</b> ] </td>
	<td class="ylw10" align=center height=28 width=250>status:<b> {if $order.status == 0}W/I expect
									{elseif $order.status == 1}<span class=ssign>PTTN. expect</span>
									{elseif $order.status == 2}<span class=ssign>FAB. expect</span>
									{elseif $order.status == 3}<span class=ssign>ACC. expect</span>
									{elseif $order.status == 4}<span class=lgrn>PTTN schdle</span>
									{elseif $order.status == 5}<span class=lgrn>SMPL schdle</span>
									{elseif $order.status == 6}<span class=grn9>DEVELOPING</span>
									{elseif $order.status == 7}<span class=ssign>* PENDING *</span>
									{elseif $order.status == 10}<span class=des>= case close =</span>
									{else}&nbsp;{/if}</b></td>
   </tr>
</table>
{if $msg_YES}
     <table border=1 cellpadding=1 cellspacing=0 cols=1 width=720>
      <tr bgcolor=#ffffff> 
        <td width=90 class=gry10 align=center><img src="images/alert.gif" border=0></td>
        <td class=bgdy>{section name=SEC_MSG loop=$msg} {$msg[SEC_MSG]}<br>{/section}</td>
      </tr>
     </table>
{/if}
<table border=0 cellspacing=1 cellpadding=3 width=720 bgcolor=#FFFFFF>
   <tr>
   <td align=center class=head valign=top rowspan=8>
		<table width=110 border=1 cellspacing=0 cellpadding=1>
			<tr><td align=center><input type="image" src="{$main_pic}" name="pic" {if $height == 1}height=150{else}width=110{/if} border="0" {if $main_pic <> 'http://scm-b.carnival.com.tw/images/graydot.gif'}onclick='window.open2("{$main_pic}","","resizable=yes,height=480,width=640")'{/if}></td></tr>
		</table>
	</td>
    <td colspan=6 class=frnt align=center><hr size=2 width=98%></td>
    <td colspan=6 class=frnt align=center><hr size=2 width=98%></td>
  </tr>
 <tr><form method=POST name=add_order >
    <td class=snvy align=right nowrap width=80><b>S-Order # :</b></td>
    <td class=bgdy align=left width=100><b>{$order.num}</b></td>
    <td class=snvy align=right nowrap width=90><b>Customer :</b></td>
			<input type="hidden" name="PHP_cust" value="{$cust_id}">
    <td class=bgdy align=left width=90><b>{$order.cust_iname}</b></td>
	<td class=snvy align=right nowrap width=90><b>work Team :</b></td>
			<input type="hidden" name="PHP_dept" value="{$dept_id}">
    <td class=bgdy align=left width=90><b>{$order.dept}</b></td>
 </tr>
 <tr>
    <td class=snvy align=right nowrap><b>smpl type :</b></td>
    <td class=bgdy align=left><b>{$order.smpl_type}</b></td>
    <td class=snvy align=right nowrap><b>style # :</b></td>
	<td class=bgdy align=left><small>{$order.ref}</small></td>
    <td class=snvy align=right nowrap><b>style cat. :</b></td>
    <td class=bgdy align=left><b>{$order.style_cat}</b></td>
 </tr>
 <tr>
    <td class=snvy align=right nowrap><b>ETD :</b></td>
	<td class=bgdy align=left><b>{$order.etd}</b></td>
    <td class=snvy align=right nowrap><b>style type :</b></td>
    <td class=bgdy align=left><b>{$order.style}</b></td>
    <td class=snvy align=right nowrap><b>IE :</b></td>
    <td class=b9 align=left><b>{$order.ie}</b></td>
  </tr>
  <tr>
    <td colspan=6 class=frnt align=center><hr size=2 width=98%></td>
  </tr>

  <tr bgcolor=#cccccc>
    <td class=snvy bgcolor=#ffffff>&nbsp;</td>
	<td class=b9 align=center><b>ETA</b></td>
	<td class=b9 align=center><b>RECEIVED</b></td>
    <td class=snvy bgcolor=#ffffff>&nbsp;</td>
	<td class=b9 align=center><b>ETA</b></td>
	<td class=b9 align=center><b>RECEIVED</b></td>
  </tr>

  <tr bgcolor=#eeeeee>
    <td class=snvy align=right nowrap bgcolor=#cccccc><b>cust. pattn. :</b></td>
	<td class=bgdy align=center><b>{if $order.pttn_suppt}{if $order.peta <> '0000-00-00'}{$order.peta}{else}N/A{/if}{else}<span class=b9>not support</span>{/if}</td>
	<td class=b9 align=center><b>{if $order.pttn_suppt}{if $order.rcvd_pttn <> '0000-00-00'}{$order.rcvd_pttn}</b>{else}N/A{/if}{else}<span class=b9>no need</span>{/if}</td>
    <td class=snvy align=right nowrap bgcolor=#cccccc><b>Fabric :</b></td>
	<td class=b9 align=center><b>{if $order.fab_substu}substitude{else}{if $order.feta <> '0000-00-00'}{$order.feta}{else}<span class=bgdy9><b>N/A</b></span>{/if}{/if}</td>
	<td class=b9 align=center><b>{if $order.fab_substu}no need{else}{if $order.rcvd_fab <> '0000-00-00'}{$order.rcvd_fab}{else}<span class=bgdy9><b>N/A</b></span>{/if}{/if}</b></td>
  </tr>
  <tr bgcolor=#eeeeee>
    <td class=snvy align=right nowrap bgcolor=#cccccc><b>W / I : </b></td>
	<td class=bgdy align=center><b>
	{if $order.wi_date <> '0000-00-00'}
		{if $order.wi_id}
	         <a href="javascript:Show_ord_wi('{$order.wi_id}')" value='ord_out' style='cursor:pointer'>{$order.wi_date}</a>
		{else}
			{$order.wi_date}
		{/if}
	{else}N/A{/if}</b></td>
	<td class=b9 align=center><b>&nbsp;maker : <span class=ssign>{$order.factory}&nbsp;</b></td>
    <td class=snvy align=right nowrap bgcolor=#cccccc><b>Accessory :</b></td>
	<td class=b9 align=center><b>{if $order.acc_substu}substitude{else}{if $order.aeta <> '0000-00-00'}{$order.aeta}{else}<span class=bgdy9></b>N/A</b></span>{/if}{/if}</td>
	<td class=b9 align=center><b>{if $order.acc_substu}no need{else}{if $order.rcvd_acc <> '0000-00-00'}{$order.rcvd_acc}{else}<span class=bgdy9><b>N/A</b></span>{/if}{/if}</b></td>
  </tr>

  <tr>
    <td colspan=7 class=frnt align=center><hr size=2 width=98%></td>
  </tr>
  <tr>
    <td class=snvy align=left nowrap colspan=3>&nbsp;&nbsp;&nbsp;&nbsp;
		<b>required Q'ty : </b><span class=bgdy><b>&nbsp;&nbsp;{$order.rq}</b>&nbsp;</span> + <span class=bgdy><b>{$order.backup}</b> =  <span class=bgdy><b>{$order.qty}</b>&nbsp;<span class=bgdy><b>{$order.unit}</b></span></td>
    <td class=snvy align=right bgcolor=#cccccc>
		<b>Pattern - ETF : </b></td>
    <td class=ssign align=left bgcolor=#eeeeee>
		<b>{if $order.schd_pttn <> '0000-00-00'}{$order.schd_pttn}{else}N/A{/if}</b></td>
	<td class=snvy align=right bgcolor=#cccccc>
		<b>pattern done : </b></td>
	<td class=snvy align=left bgcolor=#eeeeee>
		<b>{if $order.done_pttn <> '0000-00-00'}{$order.done_pttn}{else}<span class=bgdy> N/A{/if}</b></td>
  </tr>
   <tr>
    <td class=snvy align=left nowrap colspan=3>&nbsp;&nbsp;&nbsp;&nbsp;
		<b>finished Q'ty : <span class=bgdy>&nbsp;&nbsp;{$order.qty_done}&nbsp;{$order.unit}</b>&nbsp;&nbsp;{if $done_smpl <> '' and $done_smpl <> '0000-00-00'}[ {$done_smpl} ]</span>{/if}</td>
    <td class=snvy align=right bgcolor=#cccccc>
		<b>Sample - ETF : </b></td>
    <td class=ssign align=left bgcolor=#eeeeee>
		<b>{if $order.schd_smpl <> '0000-00-00'}{$order.schd_smpl}{else}N/A{/if}</b></td>
	<td class=snvy align=right bgcolor=#cccccc>
		<b>Sample done : </b></td>
	<td class=snvy align=left bgcolor=#eeeeee>
		<b>{if $order.done_smpl <> '0000-00-00'}{$order.done_smpl}{else}<span class=bgdy> N/A{/if}</b></td>
  </tr>

  <tr>
    <td colspan=7 class=frnt align=center><hr size=2 width=98%></td>
  </tr>
  <tr>
  <td colspan=7>
      <table border=0 cellspacing=0 cellpadding=0 align=center>
	  <tr>
    <td class=snvy align=center width=220 nowrap>&nbsp;
		<b>Marker :<span class=bgdy> {if $order.marker_date <> '0000-00-00'}{$order.marker_date}{else}N/A{/if}</span></b></td>
    <td class=snvy align=center colspan=2>&nbsp;
			<b>open date : <span class=bgdy>{$order.open_date}&nbsp;</span></b> 
			[ <a href="javascript:message_out('{$order.creator_id}')" style="cursor:pointer">{$order.creator}</a> ]
		</td>
    <td class=snvy align=center colspan=3>&nbsp;
			<b>last update : <span class=bgdy>{$order.last_update}&nbsp;</span></b> 
			[ <a href="javascript:message_out('{$order.updator_id}')" style="cursor:pointer">{$order.updator}</a> ]
		</td>
	</tr>
	</table>
	</td>
  </tr>

  <tr>
    <td colspan=7 class=frnt align=center><hr size=2 width=98%></td>
  </tr>

  <tr>
    <td colspan=6>
    <table border=0 cellspacing=0 cellpadding=0 align=center>
	  <tr>
	     <td class=snvy width=50 align=right><b>WorkSheet : </b></td>
	{if $order.ws_date == '0000-00-00' ||  $order.ws_date == ''}
	    <td class=snvy align=left width=110><b><span class=bgdy>&nbsp; N/A</span></b></td>
	{else}
  	  <td class=snvy align=left width=110>&nbsp; <b>
        <a href="javascript:Show_ord_ti('{$order.wi_id}')" value='ord_out' style='cursor:pointer'>{$order.ws_date}</a>  	 	 
  	  </b></td>
	{/if}

	     <td class=snvy width=50 align=right><b>BOM : </b></td>
	{if $order.bom_date == '0000-00-00' ||  $order.bom_date == ''}
	    <td class=snvy align=left width=110><b><span class=bgdy>&nbsp; N/A</span></b></td>
	{else}
    <td class=snvy align=left width=110>&nbsp; <b>
       <a href="javascript:Show_ord_bom('{$order.wi_id}')" value='ord_out' style='cursor:pointer'>{$order.bom_date}</a>  	 	 
    
    </b></td>
	{/if}


		 <td class=snvy width=150 align=right><b>Sample Approval : </b></td>
	{if $order.apv_date == '0000-00-00'}
	    <td class=snvy align=left><b><span class=bgdy>no approval</span></b></td>
	{else}
    <td class=snvy align=left bgcolor=#FFFF66><b><span class=bgdy>{$order.apv_date}</span></b></td>
	{/if}

	  </tr>
	</table>
    </td>

  </tr>
  <tr>
    <td colspan=7 class=frnt align=center><hr size=2 width=98%></td>
  </tr>

</table>
{if $add_flag}
<!---------- sample logs form   -->
<form method=POST name=smpl_logs>
	<table border=1 cellspacing=0 cellpadding=0 width=710 align=center>
	  <tr bgcolor=#bbbbbb height=25>
	    <td colspan=3 align=center class=nvy9><b>Adding  logs</b></td>
	  </tr>
	  <tr bgcolor=#666666 height=25>
	   <td width=100 class=w10 align=center>Subject</td>
	   <td width=520 class=w10 align=center>logs describs</td>
	   <td width=70 class=w10 align=center>&nbsp;</td>
	  </tr>
	  <tr bgcolor=#eeeeee >
	   <td class=gry9 align=center>{$logs_subj}</td>
	   <td class=gry9 align=left>
	      <textarea name="PHP_des" rows=3 cols=100 class=select>{$smpl_log.des}</textarea></td>
	   <td class=ylw9 align=center valign=center>
			<input type=submit value="save" class=select_e style="cursor:pointer; width=55; height=45" onClick=this.width=0;></td>
		<input type="hidden" name="PHP_action" value="do_smpl_logs_add">
		<input type="hidden" name="back_action" value="smpl_supplier_view">
		<input type="hidden" name="PHP_num" value="{$order.num}">

		<input type="hidden" name="PHP_id" value="{$order.id}">
		<input type="hidden" name="PHP_back_str" value="{$back_str2}">
	  </tr></form>
	</table><br>
{/if}
<!---------- SHOW 出 一些訂單歷史記錄   -->
 {if $log_records}  
	<table border=1 cellspacing=0 cellpadding=0 width=710 align=center>
	  <tr bgcolor=#bbbbbb height=25>
	   <td colspan=4 align=center class=nvy9><b>History logs</b></td>
	  </tr>
	  <tr bgcolor=#666666 height=25>
	   <td width=100 class=w10 align=center>Date</td>
	   <td width=100 class=w10 align=center>Subject</td>
	   <td width=400 class=w10 align=center>History records</td>
	   <td width=80 class=w10 align=center>by</td>
	  </tr>
	 {section name=SEC loop=$logs}
	  <tr bgcolor=#eeeeee >
	   <td class=gry9 align=center><small>{$logs[SEC].k_time}</small></td>
	   <td class=gry9 align=center><small>{$logs[SEC].subj}</small></td>
	   <td class=gry9 align=left>{$logs[SEC].des}</td>
	   <td class=gry9 align=center>{$logs[SEC].user}</td>
	  </tr>
	{/section}
	</table>
  {/if}   
<!-------- END SHOW   -->  

<!--    order version -->

<table border=0 cellspacing=0 cellpadding=2 width=680 bgcolor=#ffffff align=center>
  <tr>
    <td colspan=8 class=frnt align=center><hr size=2 width=98%></td>
  </tr>
  <tr>
	<td colspan=2><form method=POST name=back>
{if $back_str}
		<input type=button onClick="window.location.href='{$back_str}'" value=" << go back " class=select_e style="cursor:pointer; width=99%"></form>
{else}&nbsp;
{/if}
	</td>

  </tr>

</table>
<!--------- footer ---------->
{include file="footer.html"}
