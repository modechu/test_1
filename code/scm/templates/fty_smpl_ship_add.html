<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=big5">
<title>===:::::::::: SCM SYSTEM ::::::::::===</title>
<link rel=stylesheet type="text/css" href="./bom.css">
{literal}
<script type="text/javascript"
        src="./js/build/yahoo/yahoo-min.js"></script>
<script type="text/javascript"
        src="./js/build/connection/connection-min.js"></script>

<Script language="javascript">
function add_check(){
	var ship_to = document.ship_add.PHP_ship_to.value;
	document.ship_add_det.PHP_ship_to.value = ship_to;

}

function fnsh_check(){
	var ship_to = document.ship_add.PHP_ship_to.value;
	document.ship_add_fsh.PHP_ship_to.value = ship_to;

}

function del_mat(id,r){
	if ( confirm("Are you sure to delete ??")) {
		var i=r.parentNode.parentNode.rowIndex
		document.getElementById('mat_table').deleteRow(i)
		sUrl="smpl_ship.php?PHP_action=del_det_ajax&PHP_id="+id;
		transaction = YAHOO.util.Connect.asyncRequest('GET', sUrl, callback, null);
	} 
}

function edit_ship(id){
		var qty = window.document.forms['ship_add_det'].elements['PHP_qty_det['+id+']'].value;

		sUrl="smpl_ship.php?PHP_action=edit_det_ajax&PHP_id="+id+"&PHP_qty="+qty;
		transaction = YAHOO.util.Connect.asyncRequest('GET', sUrl, editback, null);
}

function get_smpl(r){
	var smpl = r.value;
	smpl_size.innerHTML = '&nbsp;';
	sUrl="smpl_ship.php?PHP_action=get_size_ajax&SCH_smpl="+smpl;
	
	transaction = YAHOO.util.Connect.asyncRequest('GET', sUrl, sizeback, null);
	
}

var transaction;
var sUrl;
var callback = {
	success: function(o) {
		document.getElementById("tbl_msg").style.display='block';    
		var response = o.responseText;    	
		msg1.innerText  = response; 
	},
	failure: function(o) {
		alert("Error¡GCan't get data");
	}
};

var editback = {
	success: function(o) {
		document.getElementById("tbl_msg").style.display='block';    
		var response = o.responseText;    	
		msg1.innerText  = response; 
	},
	failure: function(o) {
		alert("Error¡GCan't get data");
	}
};

var sizeback = {
	success: function(o) {
		var response = o.responseText;    	
		smpl_size.innerHTML = response; 
		

	},
	failure: function(o) {
		alert("Error¡GCan't get data");
	}
};
</script>

{/literal}
</head>
<body >
<br>
<form METHOD="POST" name="ship_add" action="{$PHP_SELF}">
<table cellspacing=1 cellpadding=4 cols=1 width=600 bgcolor=#003300>
	<tr>
		<td class="ylw10" align=center width=200 height=28><b>Sample Shipping Append</b> </td>
	</tr>
</table>
<table border=1 cellpadding=4 cellspacing=0 cols=1 width=600 id='tbl_msg' {if $msg_YES} style="display : block" {else}style="display : none"{/if}>
	<tr bgcolor=#ffffff> 
		<td width=90 class=gry10 align=center><img src="images/alert.gif" border=0></td>
		<td class=bgdy><div id='msg1'>{section name=SEC_MSG loop=$msg} {$msg[SEC_MSG]}<br>{/section}</div></td>
	</tr>
</table>
			<table border=0 cellspacing=1 cellpadding=3 width="600" bgcolor=#FFFFFF>
				<tr>
					<td class=snvy align=left ><b>SHIP# :&nbsp; {$shp.ship_num}</b></td>

					<td class=snvy align=left ><b>From :&nbsp; {$shp.fty}</b></td>
					<td class=snvy align=left ><b>TO :&nbsp; <input type=text name="PHP_ship_to" size=12 class=select value="{$shp.ship_to}" > </td>
	
				</tr>
			</table>
</form>

<hr SIZE=2 WIDTH=600>

<form METHOD="POST" name="ship_add_det" action="{$PHP_SELF}">
<table border="1" cellspacing=0 cellpadding=2 width=600 id="mat_table" bgColor='#000000'>	
	<tr bgcolor="#003333" height=28>
		<td width="200" class=back align="center"><b>Sample #</b></td>		
		<td width="150" class=back align="center"><b>size</b></td>
		<td width="150" class=back align="center"><b>qty</b></td>
	  <td class=back align="center">ADD</td>	
	</tr>
	<tr bgColor='#ffffff'>
		<td  align="center" nowrap>&nbsp;{$shp.sample}</td>
		<td  align="center" nowrap><div id=smpl_size>&nbsp;</div></td>
		<td  align="center" nowrap>&nbsp;<input type=text name="PHP_qty" size=15 class=select value=""></td>
	  <td  align="center">				
  	<input type='submit' value="ADD" onclick=add_check()>	
  	<input type=hidden name="PHP_ship_to" value="{$shp.ship_to}">	  	
  	<input type=hidden name="PHP_fty" value="{$shp.fty}">	  	
  	<input type=hidden name="PHP_dept" value="{$shp.dept}">	  
  	<input type=hidden name="PHP_id" value="{$shp.id}">	  	
		<input type=hidden name="PHP_action" value="ship_add_det">
		</td>
	</tr>		
	<tr></tr>
	{section name=SEC loop=$shp_det} 
	<tr bgColor='#ffffff'>
		<td  align="center" nowrap>&nbsp;{$shp_det[SEC].smpl_num}</td>
		<td  align="center" nowrap>{$shp_det[SEC].size}</td>
		<td  align="center" nowrap>&nbsp;<input type=text name="PHP_qty_det[{$shp_det[SEC].id}]" size=15 class=select value="{$shp_det[SEC].ship_qty}"></td>
	  <td  align="center" bgcolor=#E7E7E7>	
  	<input type='button' value="EDIT" onclick=edit_ship({$shp_det[SEC].id})>	
  	<input type='image' src="images/del.png"  onClick="del_mat('{$shp_det[SEC].id}',this);">	
		</td>
	</tr>	
	{/section}
</table>
</form>
<form METHOD="POST" name="ship_add_fsh" action="{$PHP_SELF}">
<hr SIZE=2 WIDTH=600>
<table border=0 cellspacing=0 cellpadding=0 cols=2 width=600>
	<tr>
		<td width=450>
			<input type=submit value="[ SAVE above records ]" class=select_e style="cursor:pointer; width=99%" onclick=fnsh_check() >
		</td>
	</tr>
</table>
  	<input type=hidden name="PHP_ship_to" value="{$shp.ship_to}">	  	
  	<input type=hidden name="PHP_id" value="{$shp.id}">	  	
		<input type=hidden name="PHP_action" value="do_ship_add">
</form>
<!--------- footer ---------->
{include file="footer.html"}